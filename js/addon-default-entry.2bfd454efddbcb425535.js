(window.webpackJsonpGUI = window.webpackJsonpGUI || []).push([[4], {
    1482: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, "/* Imported by other addons */\n\n.sa-block-color {\n  --sa-block-colored-background: var(--sa-block-background-primary);\n  --sa-block-colored-background-secondary: var(--sa-block-background-tertiary);\n  --sa-block-bright-background: var(--sa-block-background-primary);\n  --sa-block-text: white;\n  --sa-block-gray-text: white;\n  --sa-block-colored-text: var(--sa-block-background-primary);\n  --sa-block-text-on-bright-background: white;\n}\n\n.sa-block-color-motion {\n  --sa-block-background-primary: var(--editorTheme3-motion-primary, #4c97ff);\n  --sa-block-background-secondary: var(--editorTheme3-motion-secondary, #4280d7);\n  --sa-block-background-tertiary: var(--editorTheme3-motion-tertiary, #3373cc);\n  --sa-block-field-background: var(--editorTheme3-motion-field, #3373cc);\n}\n\n.sa-block-color-looks {\n  --sa-block-background-primary: var(--editorTheme3-looks-primary, #9966ff);\n  --sa-block-background-secondary: var(--editorTheme3-looks-secondary, #855cd6);\n  --sa-block-background-tertiary: var(--editorTheme3-looks-tertiary, #774dcb);\n  --sa-block-field-background: var(--editorTheme3-looks-field, #774dcb);\n}\n\n.sa-block-color-sounds {\n  --sa-block-background-primary: var(--editorTheme3-sounds-primary, #cf63cf);\n  --sa-block-background-secondary: var(--editorTheme3-sounds-secondary, #c94fc9);\n  --sa-block-background-tertiary: var(--editorTheme3-sounds-tertiary, #bd42bd);\n  --sa-block-field-background: var(--editorTheme3-sounds-field, #bd42bd);\n}\n\n.sa-block-color-events {\n  --sa-block-background-primary: var(--editorTheme3-event-primary, #ffbf00);\n  --sa-block-background-secondary: var(--editorTheme3-event-secondary, #e6ac00);\n  --sa-block-background-tertiary: var(--editorTheme3-event-tertiary, #cc9900);\n  --sa-block-field-background: var(--editorTheme3-event-field, #cc9900);\n}\n\n.sa-block-color-control {\n  --sa-block-background-primary: var(--editorTheme3-control-primary, #ffab19);\n  --sa-block-background-secondary: var(--editorTheme3-control-secondary, #ec9c13);\n  --sa-block-background-tertiary: var(--editorTheme3-control-tertiary, #cf8b17);\n  --sa-block-field-background: var(--editorTheme3-control-field, #cf8b17);\n}\n\n.sa-block-color-sensing {\n  --sa-block-background-primary: var(--editorTheme3-sensing-primary, #5cb1d6);\n  --sa-block-background-secondary: var(--editorTheme3-sensing-secondary, #47a8d1);\n  --sa-block-background-tertiary: var(--editorTheme3-sensing-tertiary, #2e8eb8);\n  --sa-block-field-background: var(--editorTheme3-sensing-field, #2e8eb8);\n}\n\n.sa-block-color-operators {\n  --sa-block-background-primary: var(--editorTheme3-operators-primary, #59c059);\n  --sa-block-background-secondary: var(--editorTheme3-operators-secondary, #46b946);\n  --sa-block-background-tertiary: var(--editorTheme3-operators-tertiary, #389438);\n  --sa-block-field-background: var(--editorTheme3-operators-field, #389438);\n}\n\n.sa-block-color-data {\n  --sa-block-background-primary: var(--editorTheme3-data-primary, #ff8c1a);\n  --sa-block-background-secondary: var(--editorTheme3-data-secondary, #ff8000);\n  --sa-block-background-tertiary: var(--editorTheme3-data-tertiary, #db6e00);\n  --sa-block-field-background: var(--editorTheme3-data-field, #db6e00);\n}\n\n.sa-block-color-data-lists,\n.sa-block-color-list {\n  --sa-block-background-primary: var(--editorTheme3-data_lists-primary, #ff661a);\n  --sa-block-background-secondary: var(--editorTheme3-data_lists-secondary, #ff5500);\n  --sa-block-background-tertiary: var(--editorTheme3-data_lists-tertiary, #e64d00);\n  --sa-block-field-background: var(--editorTheme3-data_lists-field, #e64d00);\n}\n\n.sa-block-color-more,\n.sa-block-color-null {\n  --sa-block-background-primary: var(--editorTheme3-more-primary, #ff6680);\n  --sa-block-background-secondary: var(--editorTheme3-more-secondary, #ff4d6a);\n  --sa-block-background-tertiary: var(--editorTheme3-more-tertiary, #ff3355);\n  --sa-block-field-background: var(--editorTheme3-more-field, #ff3355);\n}\n\n.sa-block-color-pen {\n  --sa-block-background-primary: var(--editorTheme3-pen-primary, #0fbd8c);\n  --sa-block-background-secondary: var(--editorTheme3-pen-secondary, #0da57a);\n  --sa-block-background-tertiary: var(--editorTheme3-pen-tertiary, #0b8e69);\n  --sa-block-field-background: var(--editorTheme3-pen-field, #0b8e69);\n}\n\n.sa-block-color-addon-custom-block {\n  --sa-block-background-primary: var(--editorTheme3-sa-primary, #29beb8);\n  --sa-block-background-secondary: var(--editorTheme3-sa-secondary, #3aa8a4);\n  --sa-block-background-tertiary: var(--editorTheme3-sa-tertiary, #3aa8a4);\n  --sa-block-field-background: var(--editorTheme3-sa-field, #3aa8a4);\n}\n\n.sa-block-color-TurboWarp {\n  --sa-block-background-primary: var(--editorTheme3-tw-primary, #ff4c4c);\n  --sa-block-background-secondary: var(--editorTheme3-tw-secondary, #e64444);\n  --sa-block-background-tertiary: var(--editorTheme3-tw-tertiary, #e64444);\n  --sa-block-field-background: var(--editorTheme3-tw-field, #e64444);\n}\n", ""])
    },
    1487: function(e, t, o) {
        "use strict";
        o.d(t, "a", (function() {
            return n
        })),
        o.d(t, "b", (function() {
            return r
        }));
        const n = () => /^#?[0-9a-fA-F]{3,8}$/,
            r = e => {
                let t = String(e);
                if (!n().test(t))
                    return "#000000";
                if (t.startsWith("#") || (t = "#".concat(t)), 4 === t.length) {
                    const [e, o, n, r] = t;
                    t = "#".concat(o).concat(o).concat(n).concat(n).concat(r).concat(r)
                }
                return t.toLowerCase()
            }
    },
    1488: function(e, t, o) {
        "use strict";
        o.d(t, "a", (function() {
            return n
        }));
        class n {
            constructor(e)
            {
                this.timeout = null,
                this.callback = null,
                this.wait = e
            }
            abort(e=!0)
            {
                this.timeout && (clearTimeout(this.timeout), e && this.callback(), this.timeout = this.callback = null)
            }
            limit(e)
            {
                this.abort(!1),
                this.callback = e,
                this.timeout = setTimeout(() => {
                    this.timeout = this.callback = null,
                    e()
                }, this.wait)
            }
        }
    },
    1489: function(e, t, o) {
        "use strict";
        const n = function(e) {
            var t = /^\s+/,
                o = /\s+$/,
                n = 0,
                r = e.round,
                s = e.min,
                a = e.max,
                i = e.random;
            function c(i, l) {
                if (l = l || {}, (i = i || "") instanceof c)
                    return i;
                if (!(this instanceof c))
                    return new c(i, l);
                var d = function(n) {
                    var r = {
                            r: 0,
                            g: 0,
                            b: 0
                        },
                        i = 1,
                        c = null,
                        l = null,
                        d = null,
                        u = !1,
                        p = !1;
                    "string" == typeof n && (n = function(e) {
                        e = e.replace(t, "").replace(o, "").toLowerCase();
                        var n,
                            r = !1;
                        if (C[e])
                            e = C[e],
                            r = !0;
                        else if ("transparent" == e)
                            return {
                                r: 0,
                                g: 0,
                                b: 0,
                                a: 0,
                                format: "name"
                            };
                        if (n = W.rgb.exec(e))
                            return {
                                r: n[1],
                                g: n[2],
                                b: n[3]
                            };
                        if (n = W.rgba.exec(e))
                            return {
                                r: n[1],
                                g: n[2],
                                b: n[3],
                                a: n[4]
                            };
                        if (n = W.hsl.exec(e))
                            return {
                                h: n[1],
                                s: n[2],
                                l: n[3]
                            };
                        if (n = W.hsla.exec(e))
                            return {
                                h: n[1],
                                s: n[2],
                                l: n[3],
                                a: n[4]
                            };
                        if (n = W.hsv.exec(e))
                            return {
                                h: n[1],
                                s: n[2],
                                v: n[3]
                            };
                        if (n = W.hsva.exec(e))
                            return {
                                h: n[1],
                                s: n[2],
                                v: n[3],
                                a: n[4]
                            };
                        if (n = W.hex8.exec(e))
                            return {
                                r: D(n[1]),
                                g: D(n[2]),
                                b: D(n[3]),
                                a: j(n[4]),
                                format: r ? "name" : "hex8"
                            };
                        if (n = W.hex6.exec(e))
                            return {
                                r: D(n[1]),
                                g: D(n[2]),
                                b: D(n[3]),
                                format: r ? "name" : "hex"
                            };
                        if (n = W.hex4.exec(e))
                            return {
                                r: D(n[1] + "" + n[1]),
                                g: D(n[2] + "" + n[2]),
                                b: D(n[3] + "" + n[3]),
                                a: j(n[4] + "" + n[4]),
                                format: r ? "name" : "hex8"
                            };
                        if (n = W.hex3.exec(e))
                            return {
                                r: D(n[1] + "" + n[1]),
                                g: D(n[2] + "" + n[2]),
                                b: D(n[3] + "" + n[3]),
                                format: r ? "name" : "hex"
                            };
                        return !1
                    }(n));
                    "object" == typeof n && (Z(n.r) && Z(n.g) && Z(n.b) ? (h = n.r, f = n.g, m = n.b, r = {
                        r: 255 * N(h, 255),
                        g: 255 * N(f, 255),
                        b: 255 * N(m, 255)
                    }, u = !0, p = "%" === String(n.r).substr(-1) ? "prgb" : "rgb") : Z(n.h) && Z(n.s) && Z(n.v) ? (c = A(n.s), l = A(n.v), r = function(t, o, n) {
                        t = 6 * N(t, 360),
                        o = N(o, 100),
                        n = N(n, 100);
                        var r = e.floor(t),
                            s = t - r,
                            a = n * (1 - o),
                            i = n * (1 - s * o),
                            c = n * (1 - (1 - s) * o),
                            l = r % 6;
                        return {
                            r: 255 * [n, i, a, a, c, n][l],
                            g: 255 * [c, n, n, i, a, a][l],
                            b: 255 * [a, a, c, n, n, i][l]
                        }
                    }(n.h, c, l), u = !0, p = "hsv") : Z(n.h) && Z(n.s) && Z(n.l) && (c = A(n.s), d = A(n.l), r = function(e, t, o) {
                        var n,
                            r,
                            s;
                        function a(e, t, o) {
                            return o < 0 && (o += 1), o > 1 && (o -= 1), o < 1 / 6 ? e + 6 * (t - e) * o : o < .5 ? t : o < 2 / 3 ? e + (t - e) * (2 / 3 - o) * 6 : e
                        }
                        if (e = N(e, 360), t = N(t, 100), o = N(o, 100), 0 === t)
                            n = r = s = o;
                        else {
                            var i = o < .5 ? o * (1 + t) : o + t - o * t,
                                c = 2 * o - i;
                            n = a(c, i, e + 1 / 3),
                            r = a(c, i, e),
                            s = a(c, i, e - 1 / 3)
                        }
                        return {
                            r: 255 * n,
                            g: 255 * r,
                            b: 255 * s
                        }
                    }(n.h, c, d), u = !0, p = "hsl"), n.hasOwnProperty("a") && (i = n.a));
                    var h,
                        f,
                        m;
                    return i = E(i), {
                        ok: u,
                        format: n.format || p,
                        r: s(255, a(r.r, 0)),
                        g: s(255, a(r.g, 0)),
                        b: s(255, a(r.b, 0)),
                        a: i
                    }
                }(i);
                this._originalInput = i,
                this._r = d.r,
                this._g = d.g,
                this._b = d.b,
                this._a = d.a,
                this._roundA = r(100 * this._a) / 100,
                this._format = l.format || d.format,
                this._gradientType = l.gradientType,
                this._r < 1 && (this._r = r(this._r)),
                this._g < 1 && (this._g = r(this._g)),
                this._b < 1 && (this._b = r(this._b)),
                this._ok = d.ok,
                this._tc_id = n++
            }
            function l(e, t, o) {
                e = N(e, 255),
                t = N(t, 255),
                o = N(o, 255);
                var n,
                    r,
                    i = a(e, t, o),
                    c = s(e, t, o),
                    l = (i + c) / 2;
                if (i == c)
                    n = r = 0;
                else {
                    var d = i - c;
                    switch (r = l > .5 ? d / (2 - i - c) : d / (i + c), i) {
                    case e:
                        n = (t - o) / d + (t < o ? 6 : 0);
                        break;
                    case t:
                        n = (o - e) / d + 2;
                        break;
                    case o:
                        n = (e - t) / d + 4
                    }
                    n /= 6
                }
                return {
                    h: n,
                    s: r,
                    l: l
                }
            }
            function d(e, t, o) {
                e = N(e, 255),
                t = N(t, 255),
                o = N(o, 255);
                var n,
                    r,
                    i = a(e, t, o),
                    c = s(e, t, o),
                    l = i,
                    d = i - c;
                if (r = 0 === i ? 0 : d / i, i == c)
                    n = 0;
                else {
                    switch (i) {
                    case e:
                        n = (t - o) / d + (t < o ? 6 : 0);
                        break;
                    case t:
                        n = (o - e) / d + 2;
                        break;
                    case o:
                        n = (e - t) / d + 4
                    }
                    n /= 6
                }
                return {
                    h: n,
                    s: r,
                    v: l
                }
            }
            function u(e, t, o, n) {
                var s = [M(r(e).toString(16)), M(r(t).toString(16)), M(r(o).toString(16))];
                return n && s[0].charAt(0) == s[0].charAt(1) && s[1].charAt(0) == s[1].charAt(1) && s[2].charAt(0) == s[2].charAt(1) ? s[0].charAt(0) + s[1].charAt(0) + s[2].charAt(0) : s.join("")
            }
            function p(e, t, o, n) {
                return [M(O(n)), M(r(e).toString(16)), M(r(t).toString(16)), M(r(o).toString(16))].join("")
            }
            function h(e, t) {
                t = 0 === t ? 0 : t || 10;
                var o = c(e).toHsl();
                return o.s -= t / 100, o.s = S(o.s), c(o)
            }
            function f(e, t) {
                t = 0 === t ? 0 : t || 10;
                var o = c(e).toHsl();
                return o.s += t / 100, o.s = S(o.s), c(o)
            }
            function m(e) {
                return c(e).desaturate(100)
            }
            function g(e, t) {
                t = 0 === t ? 0 : t || 10;
                var o = c(e).toHsl();
                return o.l += t / 100, o.l = S(o.l), c(o)
            }
            function b(e, t) {
                t = 0 === t ? 0 : t || 10;
                var o = c(e).toRgb();
                return o.r = a(0, s(255, o.r - r(-t / 100 * 255))), o.g = a(0, s(255, o.g - r(-t / 100 * 255))), o.b = a(0, s(255, o.b - r(-t / 100 * 255))), c(o)
            }
            function y(e, t) {
                t = 0 === t ? 0 : t || 10;
                var o = c(e).toHsl();
                return o.l -= t / 100, o.l = S(o.l), c(o)
            }
            function v(e, t) {
                var o = c(e).toHsl(),
                    n = (o.h + t) % 360;
                return o.h = n < 0 ? 360 + n : n, c(o)
            }
            function k(e) {
                var t = c(e).toHsl();
                return t.h = (t.h + 180) % 360, c(t)
            }
            function w(e) {
                var t = c(e).toHsl(),
                    o = t.h;
                return [c(e), c({
                    h: (o + 120) % 360,
                    s: t.s,
                    l: t.l
                }), c({
                    h: (o + 240) % 360,
                    s: t.s,
                    l: t.l
                })]
            }
            function x(e) {
                var t = c(e).toHsl(),
                    o = t.h;
                return [c(e), c({
                    h: (o + 90) % 360,
                    s: t.s,
                    l: t.l
                }), c({
                    h: (o + 180) % 360,
                    s: t.s,
                    l: t.l
                }), c({
                    h: (o + 270) % 360,
                    s: t.s,
                    l: t.l
                })]
            }
            function _(e) {
                var t = c(e).toHsl(),
                    o = t.h;
                return [c(e), c({
                    h: (o + 72) % 360,
                    s: t.s,
                    l: t.l
                }), c({
                    h: (o + 216) % 360,
                    s: t.s,
                    l: t.l
                })]
            }
            function T(e, t, o) {
                t = t || 6,
                o = o || 30;
                var n = c(e).toHsl(),
                    r = 360 / o,
                    s = [c(e)];
                for (n.h = (n.h - (r * t >> 1) + 720) % 360; --t;)
                    n.h = (n.h + r) % 360,
                    s.push(c(n));
                return s
            }
            function I(e, t) {
                t = t || 6;
                for (var o = c(e).toHsv(), n = o.h, r = o.s, s = o.v, a = [], i = 1 / t; t--;)
                    a.push(c({
                        h: n,
                        s: r,
                        v: s
                    })),
                    s = (s + i) % 1;
                return a
            }
            c.prototype = {
                isDark: function() {
                    return this.getBrightness() < 128
                },
                isLight: function() {
                    return !this.isDark()
                },
                isValid: function() {
                    return this._ok
                },
                getOriginalInput: function() {
                    return this._originalInput
                },
                getFormat: function() {
                    return this._format
                },
                getAlpha: function() {
                    return this._a
                },
                getBrightness: function() {
                    var e = this.toRgb();
                    return (299 * e.r + 587 * e.g + 114 * e.b) / 1e3
                },
                getLuminance: function() {
                    var t,
                        o,
                        n,
                        r = this.toRgb();
                    return t = r.r / 255, o = r.g / 255, n = r.b / 255, .2126 * (t <= .03928 ? t / 12.92 : e.pow((t + .055) / 1.055, 2.4)) + .7152 * (o <= .03928 ? o / 12.92 : e.pow((o + .055) / 1.055, 2.4)) + .0722 * (n <= .03928 ? n / 12.92 : e.pow((n + .055) / 1.055, 2.4))
                },
                setAlpha: function(e) {
                    return this._a = E(e), this._roundA = r(100 * this._a) / 100, this
                },
                toHsv: function() {
                    var e = d(this._r, this._g, this._b);
                    return {
                        h: 360 * e.h,
                        s: e.s,
                        v: e.v,
                        a: this._a
                    }
                },
                toHsvString: function() {
                    var e = d(this._r, this._g, this._b),
                        t = r(360 * e.h),
                        o = r(100 * e.s),
                        n = r(100 * e.v);
                    return 1 == this._a ? "hsv(" + t + ", " + o + "%, " + n + "%)" : "hsva(" + t + ", " + o + "%, " + n + "%, " + this._roundA + ")"
                },
                toHsl: function() {
                    var e = l(this._r, this._g, this._b);
                    return {
                        h: 360 * e.h,
                        s: e.s,
                        l: e.l,
                        a: this._a
                    }
                },
                toHslString: function() {
                    var e = l(this._r, this._g, this._b),
                        t = r(360 * e.h),
                        o = r(100 * e.s),
                        n = r(100 * e.l);
                    return 1 == this._a ? "hsl(" + t + ", " + o + "%, " + n + "%)" : "hsla(" + t + ", " + o + "%, " + n + "%, " + this._roundA + ")"
                },
                toHex: function(e) {
                    return u(this._r, this._g, this._b, e)
                },
                toHexString: function(e) {
                    return "#" + this.toHex(e)
                },
                toHex8: function(e) {
                    return function(e, t, o, n, s) {
                        var a = [M(r(e).toString(16)), M(r(t).toString(16)), M(r(o).toString(16)), M(O(n))];
                        if (s && a[0].charAt(0) == a[0].charAt(1) && a[1].charAt(0) == a[1].charAt(1) && a[2].charAt(0) == a[2].charAt(1) && a[3].charAt(0) == a[3].charAt(1))
                            return a[0].charAt(0) + a[1].charAt(0) + a[2].charAt(0) + a[3].charAt(0);
                        return a.join("")
                    }(this._r, this._g, this._b, this._a, e)
                },
                toHex8String: function(e) {
                    return "#" + this.toHex8(e)
                },
                toRgb: function() {
                    return {
                        r: r(this._r),
                        g: r(this._g),
                        b: r(this._b),
                        a: this._a
                    }
                },
                toRgbString: function() {
                    return 1 == this._a ? "rgb(" + r(this._r) + ", " + r(this._g) + ", " + r(this._b) + ")" : "rgba(" + r(this._r) + ", " + r(this._g) + ", " + r(this._b) + ", " + this._roundA + ")"
                },
                toPercentageRgb: function() {
                    return {
                        r: r(100 * N(this._r, 255)) + "%",
                        g: r(100 * N(this._g, 255)) + "%",
                        b: r(100 * N(this._b, 255)) + "%",
                        a: this._a
                    }
                },
                toPercentageRgbString: function() {
                    return 1 == this._a ? "rgb(" + r(100 * N(this._r, 255)) + "%, " + r(100 * N(this._g, 255)) + "%, " + r(100 * N(this._b, 255)) + "%)" : "rgba(" + r(100 * N(this._r, 255)) + "%, " + r(100 * N(this._g, 255)) + "%, " + r(100 * N(this._b, 255)) + "%, " + this._roundA + ")"
                },
                toName: function() {
                    return 0 === this._a ? "transparent" : !(this._a < 1) && (L[u(this._r, this._g, this._b, !0)] || !1)
                },
                toFilter: function(e) {
                    var t = "#" + p(this._r, this._g, this._b, this._a),
                        o = t,
                        n = this._gradientType ? "GradientType = 1, " : "";
                    if (e) {
                        var r = c(e);
                        o = "#" + p(r._r, r._g, r._b, r._a)
                    }
                    return "progid:DXImageTransform.Microsoft.gradient(" + n + "startColorstr=" + t + ",endColorstr=" + o + ")"
                },
                toString: function(e) {
                    var t = !!e;
                    e = e || this._format;
                    var o = !1,
                        n = this._a < 1 && this._a >= 0;
                    return t || !n || "hex" !== e && "hex6" !== e && "hex3" !== e && "hex4" !== e && "hex8" !== e && "name" !== e ? ("rgb" === e && (o = this.toRgbString()), "prgb" === e && (o = this.toPercentageRgbString()), "hex" !== e && "hex6" !== e || (o = this.toHexString()), "hex3" === e && (o = this.toHexString(!0)), "hex4" === e && (o = this.toHex8String(!0)), "hex8" === e && (o = this.toHex8String()), "name" === e && (o = this.toName()), "hsl" === e && (o = this.toHslString()), "hsv" === e && (o = this.toHsvString()), o || this.toHexString()) : "name" === e && 0 === this._a ? this.toName() : this.toRgbString()
                },
                clone: function() {
                    return c(this.toString())
                },
                _applyModification: function(e, t) {
                    var o = e.apply(null, [this].concat([].slice.call(t)));
                    return this._r = o._r, this._g = o._g, this._b = o._b, this.setAlpha(o._a), this
                },
                lighten: function() {
                    return this._applyModification(g, arguments)
                },
                brighten: function() {
                    return this._applyModification(b, arguments)
                },
                darken: function() {
                    return this._applyModification(y, arguments)
                },
                desaturate: function() {
                    return this._applyModification(h, arguments)
                },
                saturate: function() {
                    return this._applyModification(f, arguments)
                },
                greyscale: function() {
                    return this._applyModification(m, arguments)
                },
                spin: function() {
                    return this._applyModification(v, arguments)
                },
                _applyCombination: function(e, t) {
                    return e.apply(null, [this].concat([].slice.call(t)))
                },
                analogous: function() {
                    return this._applyCombination(T, arguments)
                },
                complement: function() {
                    return this._applyCombination(k, arguments)
                },
                monochromatic: function() {
                    return this._applyCombination(I, arguments)
                },
                splitcomplement: function() {
                    return this._applyCombination(_, arguments)
                },
                triad: function() {
                    return this._applyCombination(w, arguments)
                },
                tetrad: function() {
                    return this._applyCombination(x, arguments)
                }
            },
            c.fromRatio = function(e, t) {
                if ("object" == typeof e) {
                    var o = {};
                    for (var n in e)
                        e.hasOwnProperty(n) && (o[n] = "a" === n ? e[n] : A(e[n]));
                    e = o
                }
                return c(e, t)
            },
            c.equals = function(e, t) {
                return !(!e || !t) && c(e).toRgbString() == c(t).toRgbString()
            },
            c.random = function() {
                return c.fromRatio({
                    r: i(),
                    g: i(),
                    b: i()
                })
            },
            c.mix = function(e, t, o) {
                o = 0 === o ? 0 : o || 50;
                var n = c(e).toRgb(),
                    r = c(t).toRgb(),
                    s = o / 100;
                return c({
                    r: (r.r - n.r) * s + n.r,
                    g: (r.g - n.g) * s + n.g,
                    b: (r.b - n.b) * s + n.b,
                    a: (r.a - n.a) * s + n.a
                })
            },
            c.readability = function(t, o) {
                var n = c(t),
                    r = c(o);
                return (e.max(n.getLuminance(), r.getLuminance()) + .05) / (e.min(n.getLuminance(), r.getLuminance()) + .05)
            },
            c.isReadable = function(e, t, o) {
                var n,
                    r,
                    s = c.readability(e, t);
                switch (r = !1, (n = function(e) {
                    var t,
                        o;
                    t = ((e = e || {
                        level: "AA",
                        size: "small"
                    }).level || "AA").toUpperCase(),
                    o = (e.size || "small").toLowerCase(),
                    "AA" !== t && "AAA" !== t && (t = "AA");
                    "small" !== o && "large" !== o && (o = "small");
                    return {
                        level: t,
                        size: o
                    }
                }(o)).level + n.size) {
                case "AAsmall":
                case "AAAlarge":
                    r = s >= 4.5;
                    break;
                case "AAlarge":
                    r = s >= 3;
                    break;
                case "AAAsmall":
                    r = s >= 7
                }
                return r
            },
            c.mostReadable = function(e, t, o) {
                var n,
                    r,
                    s,
                    a,
                    i = null,
                    l = 0;
                r = (o = o || {}).includeFallbackColors,
                s = o.level,
                a = o.size;
                for (var d = 0; d < t.length; d++)
                    (n = c.readability(e, t[d])) > l && (l = n, i = c(t[d]));
                return c.isReadable(e, i, {
                    level: s,
                    size: a
                }) || !r ? i : (o.includeFallbackColors = !1, c.mostReadable(e, ["#fff", "#000"], o))
            };
            var C = c.names = {
                    aliceblue: "f0f8ff",
                    antiquewhite: "faebd7",
                    aqua: "0ff",
                    aquamarine: "7fffd4",
                    azure: "f0ffff",
                    beige: "f5f5dc",
                    bisque: "ffe4c4",
                    black: "000",
                    blanchedalmond: "ffebcd",
                    blue: "00f",
                    blueviolet: "8a2be2",
                    brown: "a52a2a",
                    burlywood: "deb887",
                    burntsienna: "ea7e5d",
                    cadetblue: "5f9ea0",
                    chartreuse: "7fff00",
                    chocolate: "d2691e",
                    coral: "ff7f50",
                    cornflowerblue: "6495ed",
                    cornsilk: "fff8dc",
                    crimson: "dc143c",
                    cyan: "0ff",
                    darkblue: "00008b",
                    darkcyan: "008b8b",
                    darkgoldenrod: "b8860b",
                    darkgray: "a9a9a9",
                    darkgreen: "006400",
                    darkgrey: "a9a9a9",
                    darkkhaki: "bdb76b",
                    darkmagenta: "8b008b",
                    darkolivegreen: "556b2f",
                    darkorange: "ff8c00",
                    darkorchid: "9932cc",
                    darkred: "8b0000",
                    darksalmon: "e9967a",
                    darkseagreen: "8fbc8f",
                    darkslateblue: "483d8b",
                    darkslategray: "2f4f4f",
                    darkslategrey: "2f4f4f",
                    darkturquoise: "00ced1",
                    darkviolet: "9400d3",
                    deeppink: "ff1493",
                    deepskyblue: "00bfff",
                    dimgray: "696969",
                    dimgrey: "696969",
                    dodgerblue: "1e90ff",
                    firebrick: "b22222",
                    floralwhite: "fffaf0",
                    forestgreen: "228b22",
                    fuchsia: "f0f",
                    gainsboro: "dcdcdc",
                    ghostwhite: "f8f8ff",
                    gold: "ffd700",
                    goldenrod: "daa520",
                    gray: "808080",
                    green: "008000",
                    greenyellow: "adff2f",
                    grey: "808080",
                    honeydew: "f0fff0",
                    hotpink: "ff69b4",
                    indianred: "cd5c5c",
                    indigo: "4b0082",
                    ivory: "fffff0",
                    khaki: "f0e68c",
                    lavender: "e6e6fa",
                    lavenderblush: "fff0f5",
                    lawngreen: "7cfc00",
                    lemonchiffon: "fffacd",
                    lightblue: "add8e6",
                    lightcoral: "f08080",
                    lightcyan: "e0ffff",
                    lightgoldenrodyellow: "fafad2",
                    lightgray: "d3d3d3",
                    lightgreen: "90ee90",
                    lightgrey: "d3d3d3",
                    lightpink: "ffb6c1",
                    lightsalmon: "ffa07a",
                    lightseagreen: "20b2aa",
                    lightskyblue: "87cefa",
                    lightslategray: "789",
                    lightslategrey: "789",
                    lightsteelblue: "b0c4de",
                    lightyellow: "ffffe0",
                    lime: "0f0",
                    limegreen: "32cd32",
                    linen: "faf0e6",
                    magenta: "f0f",
                    maroon: "800000",
                    mediumaquamarine: "66cdaa",
                    mediumblue: "0000cd",
                    mediumorchid: "ba55d3",
                    mediumpurple: "9370db",
                    mediumseagreen: "3cb371",
                    mediumslateblue: "7b68ee",
                    mediumspringgreen: "00fa9a",
                    mediumturquoise: "48d1cc",
                    mediumvioletred: "c71585",
                    midnightblue: "191970",
                    mintcream: "f5fffa",
                    mistyrose: "ffe4e1",
                    moccasin: "ffe4b5",
                    navajowhite: "ffdead",
                    navy: "000080",
                    oldlace: "fdf5e6",
                    olive: "808000",
                    olivedrab: "6b8e23",
                    orange: "ffa500",
                    orangered: "ff4500",
                    orchid: "da70d6",
                    palegoldenrod: "eee8aa",
                    palegreen: "98fb98",
                    paleturquoise: "afeeee",
                    palevioletred: "db7093",
                    papayawhip: "ffefd5",
                    peachpuff: "ffdab9",
                    peru: "cd853f",
                    pink: "ffc0cb",
                    plum: "dda0dd",
                    powderblue: "b0e0e6",
                    purple: "800080",
                    rebeccapurple: "663399",
                    red: "f00",
                    rosybrown: "bc8f8f",
                    royalblue: "4169e1",
                    saddlebrown: "8b4513",
                    salmon: "fa8072",
                    sandybrown: "f4a460",
                    seagreen: "2e8b57",
                    seashell: "fff5ee",
                    sienna: "a0522d",
                    silver: "c0c0c0",
                    skyblue: "87ceeb",
                    slateblue: "6a5acd",
                    slategray: "708090",
                    slategrey: "708090",
                    snow: "fffafa",
                    springgreen: "00ff7f",
                    steelblue: "4682b4",
                    tan: "d2b48c",
                    teal: "008080",
                    thistle: "d8bfd8",
                    tomato: "ff6347",
                    turquoise: "40e0d0",
                    violet: "ee82ee",
                    wheat: "f5deb3",
                    white: "fff",
                    whitesmoke: "f5f5f5",
                    yellow: "ff0",
                    yellowgreen: "9acd32"
                },
                L = c.hexNames = function(e) {
                    var t = {};
                    for (var o in e)
                        e.hasOwnProperty(o) && (t[e[o]] = o);
                    return t
                }(C);
            function E(e) {
                return e = parseFloat(e), (isNaN(e) || e < 0 || e > 1) && (e = 1), e
            }
            function N(t, o) {
                (function(e) {
                    return "string" == typeof e && -1 != e.indexOf(".") && 1 === parseFloat(e)
                })(t) && (t = "100%");
                var n = function(e) {
                    return "string" == typeof e && -1 != e.indexOf("%")
                }(t);
                return t = s(o, a(0, parseFloat(t))), n && (t = parseInt(t * o, 10) / 100), e.abs(t - o) < 1e-6 ? 1 : t % o / parseFloat(o)
            }
            function S(e) {
                return s(1, a(0, e))
            }
            function D(e) {
                return parseInt(e, 16)
            }
            function M(e) {
                return 1 == e.length ? "0" + e : "" + e
            }
            function A(e) {
                return e <= 1 && (e = 100 * e + "%"), e
            }
            function O(t) {
                return e.round(255 * parseFloat(t)).toString(16)
            }
            function j(e) {
                return D(e) / 255
            }
            var B,
                R,
                z,
                W = (R = "[\\s|\\(]+(" + (B = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)") + ")[,|\\s]+(" + B + ")[,|\\s]+(" + B + ")\\s*\\)?", z = "[\\s|\\(]+(" + B + ")[,|\\s]+(" + B + ")[,|\\s]+(" + B + ")[,|\\s]+(" + B + ")\\s*\\)?", {
                    CSS_UNIT: new RegExp(B),
                    rgb: new RegExp("rgb" + R),
                    rgba: new RegExp("rgba" + z),
                    hsl: new RegExp("hsl" + R),
                    hsla: new RegExp("hsla" + z),
                    hsv: new RegExp("hsv" + R),
                    hsva: new RegExp("hsva" + z),
                    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
                });
            function Z(e) {
                return !!W.CSS_UNIT.exec(e)
            }
            return c
        }(Math);
        t.a = n
    },
    1494: function(e, t, o) {
        "use strict";
        o.d(t, "b", (function() {
            return s
        })),
        o.d(t, "c", (function() {
            return i
        })),
        o.d(t, "a", (function() {
            return u
        }));
        let n = !1,
            r = !1;
        function s(e, t) {
            n = e,
            r = e && t
        }
        let a = !1;
        function i(e) {
            a = e
        }
        let c = !1,
            l = !1;
        document.addEventListener("mousedown", (function(e) {
            c = e.ctrlKey || e.metaKey,
            l = e.altKey
        }), {
            capture: !0
        });
        let d = !1;
        async function u(e) {
            if (d)
                return;
            d = !0;
            const t = await e.tab.traps.getBlockly(),
                o = t.Gesture.prototype.startDraggingBlock_;
            t.Gesture.prototype.startDraggingBlock_ = function(...e) {
                let s = this.targetBlock_;
                const i = !(this.mostRecentEvent_ instanceof MouseEvent),
                    d = a && l && !i && !this.flyout_ && !this.shouldDuplicateOnDrag_ && "procedures_definition" !== this.targetBlock_.type,
                    u = r && !i && s.getParent(),
                    p = (n || d) && c === !u && !s.isShadow();
                if ((d || p) && (t.Events.getGroup() || t.Events.setGroup(!0)), d) {
                    let e;
                    this.startWorkspace_.setResizesEnabled(!1),
                    t.Events.disable();
                    try {
                        const o = t.Xml.blockToDom(s);
                        e = t.Xml.domToBlock(o, this.startWorkspace_),
                        t.scratchBlocksUtils.changeObscuredShadowIds(e);
                        const n = s.getRelativeToSurfaceXY();
                        e.moveBy(n.x, n.y)
                    } catch (e) {
                        console.error(e)
                    }
                    t.Events.enable(),
                    e && (s = e, this.targetBlock_ = e, t.Events.isEnabled() && t.Events.fire(new t.Events.BlockCreate(e)))
                }
                if (p) {
                    if (i || d) {
                        const e = s.getNextBlock();
                        e && e.dispose()
                    }
                    s.unplug(!0)
                }
                return o.call(this, ...e)
            }
        }
    },
    1529: function(e, t, o) {
        (t = e.exports = o(9)(!1)).i(o(1482), ""),
        t.push([e.i, '.sa-find-bar {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  width: 100%;\n  height: 100%;\n}\n\n.sa-find-bar > label {\n  /* padding instead of margin so clicking on the empty area will select the input */\n  padding-left: 1.5em;\n  padding-right: 1em;\n  font-weight: bold;\n  font-size: 0.625rem;\n  user-select: none;\n  cursor: default;\n  white-space: nowrap;\n  padding-top: 2px;\n}\n\n[dir="rtl"] .sa-find-bar > label {\n  padding-right: 1.5em;\n  padding-left: 1em;\n}\n\n.sa-find-wrapper {\n  overflow: visible;\n  position: relative;\n  height: 2rem;\n  width: 100%;\n  max-width: 16em;\n}\n\n.sa-find-dropdown-out {\n  display: block;\n  top: -6px;\n  z-index: 100;\n  width: 100%;\n  max-width: 16em;\n  position: relative;\n  padding: 4px;\n  border: none;\n  border-radius: 4px;\n  margin-top: 6px;\n}\n\n.sa-find-dropdown-out.visible {\n  position: absolute;\n  width: 16em;\n  box-shadow: 0px 0px 8px 1px var(--ui-black-transparent, rgba(0, 0, 0, 0.3));\n  background-color: var(--ui-primary, white);\n}\n\n/* We need to modify Scratch styles so that the place where the find bar is injected */\n/* has actually correct size information, which is used to make the find bar not cover up controls */\n[class*="gui_tab-list_"] {\n  width: 100%;\n}\n[class*="gui_tab_"] {\n  flex-grow: 0;\n}\n\n.sa-find-input {\n  width: 100%;\n  box-sizing: border-box !important;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.4em;\n}\n\n.sa-find-input:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n.sa-find-dropdown {\n  display: none;\n  position: relative;\n  padding: 0.2em 0;\n  font-size: 0.75rem;\n  line-height: 1;\n  overflow-y: auto;\n  min-height: 128px;\n  max-height: 65vh;\n  user-select: none;\n  max-width: 100%;\n  margin-top: 6px;\n  border: none;\n}\n\n.sa-find-dropdown-out.visible > .sa-find-dropdown {\n  display: block;\n}\n\n.sa-find-dropdown > li {\n  display: block;\n  padding: 0.5em 0.3em;\n  white-space: nowrap;\n  margin: 0;\n  font-weight: bold;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sa-find-dropdown > li > b {\n  background-color: #aaffaa;\n  color: black;\n}\n\n/* Drop down items */\n.sa-find-dropdown > li:hover,\n.sa-find-dropdown > li.sel {\n  color: white;\n  cursor: pointer;\n}\n\n.sa-find-dropdown > li::before {\n  content: "\\25CF   "; /* ● */\n}\n\n.sa-find-flag {\n  color: #4cbf56;\n}\n.sa-find-flag:hover,\n.sa-find-flag.sel {\n  background-color: #4cbf56;\n}\n\n.sa-find-dropdown .sa-block-color {\n  color: var(--sa-block-colored-text);\n}\n.sa-find-dropdown .sa-block-color:hover,\n.sa-find-dropdown .sa-block-color.sel {\n  background-color: var(--sa-block-bright-background);\n}\n\n.sa-find-carousel {\n  font-weight: normal;\n  position: absolute;\n  right: 0;\n  white-space: nowrap;\n  background-color: inherit;\n  z-index: 1;\n  padding: 0;\n}\n\n.sa-find-carousel-control {\n  padding: 0 6px;\n}\n\n.sa-find-carousel-control:hover {\n  color: #ffff80;\n}\n', ""])
    },
    1530: function(e, t, o) {
        (t = e.exports = o(9)(!1)).i(o(1482), ""),
        t.push([e.i, '/* Find Input Box */\n.sa-float-bar-input {\n  width: 100%;\n  box-sizing: border-box !important;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.4em;\n}\n[theme="dark"] input.s3devInp {\n  color: #eee;\n  background: #3333;\n}\n[theme="dark"] input.s3devInp:hover {\n  background: #333;\n}\n\n.sa-float-bar-input:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n/* Drop down from find button */\n.sa-float-bar-dropdown-out {\n  display: block;\n  top: -6px;\n  z-index: 100;\n  max-width: 16em;\n  padding: 4px;\n  position: absolute;\n  width: 16em;\n  box-shadow: 0px 0px 8px 1px var(--ui-black-transparent, rgba(0, 0, 0, 0.3));\n  background-color: var(--ui-primary, white);\n  border: none;\n  border-radius: 4px;\n}\n\n/* Drop down from find button */\n.sa-float-bar-dropdown {\n  display: none;\n  position: relative;\n  padding: 0.2em 0;\n  font-size: 0.75rem;\n  line-height: 1;\n  overflow-y: auto;\n  min-height: 128px;\n  user-select: none;\n  max-width: 100%;\n  max-height: 200px;\n  margin-bottom: 0;\n}\n\n.sa-float-bar-dropdown-out.vis .sa-float-bar-dropdown {\n  display: block;\n  border: none;\n}\n\n/* Drop down items */\n.sa-float-bar-dropdown > li {\n  display: block;\n  padding: 0.5em 0.3em;\n  white-space: nowrap;\n  margin: 0;\n  font-weight: bold;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.sa-float-bar-dropdown > li > b {\n  background-color: #aaffaa;\n  color: black;\n}\n\n.sa-float-bar-dropdown > li {\n  height: 19px;\n  padding: 3px 8px;\n  margin: 2px 0.3em;\n  box-sizing: border-box;\n  position: relative;\n  background-color: var(--sa-block-colored-background);\n  color: var(--sa-block-text);\n  font-weight: bold;\n  width: min-content;\n}\n.sa-float-bar-dropdown > li:hover,\n.sa-float-bar-dropdown > li.sel {\n  background-color: var(--sa-block-colored-background-secondary);\n}\n\n.sa-float-bar-dropdown > li.sa-hat {\n  border-radius: 14px 14px 3px 3px;\n}\n.sa-float-bar-dropdown > li.sa-block {\n  border-radius: 3px;\n}\n.sa-float-bar-dropdown > li.sa-reporter {\n  border-radius: 10px;\n}\n\n.sa-float-bar-dropdown > li.sa-boolean {\n  width: min-content;\n}\n.sa-float-bar-dropdown > li.sa-boolean::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-right: 9px solid transparent;\n  border-top: 9px solid var(--ui-primary, white);\n  border-bottom: 10px solid var(--ui-primary, white);\n}\n.sa-float-bar-dropdown > li.sa-boolean::after {\n  content: "";\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-left: 9px solid transparent;\n  border-top: 9px solid var(--ui-primary, white);\n  border-bottom: 10px solid var(--ui-primary, white);\n}\n[theme="dark"] .s3devDD > li.boolean::before {\n  border-top-color: #111;\n  border-bottom-color: #111;\n}\n[theme="dark"] .s3devDD > li.boolean::after {\n  border-top-color: #111;\n  border-bottom-color: #111;\n}\n\n.sa-float-bar {\n  display: flex;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n\n  position: absolute;\n  min-width: 128px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.3) 0 0 3px, rgba(0, 0, 0, 0.2) 0 3px 10px;\n\n  z-index: 999;\n}\n[theme="dark"] #s3devFloatingBar {\n  background-color: #111;\n}\n\n.sa-float-bar-dropdown > li > b {\n  background-color: rgba(0, 0, 0, 0.6);\n  color: white;\n}\n\n[data-highlighted="true"] {\n  background-color: hsla(30, 100%, 55%, 1) !important; /* orange */\n  color: white !important;\n}\n', ""])
    },
    1531: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, ".u-dropdown-searchbar {\n  width: 100%;\n  box-sizing: border-box;\n  /* based on styles for the title input */\n  color: white;\n  background-color: hsla(0, 100%, 100%, 0.25);\n  border: 1px solid hsla(0, 0%, 0%, 0.15);\n  padding: 0.5rem;\n  outline: none;\n  transition: 0.25s ease-out;\n  font-size: 13px;\n  font-weight: bold;\n  border-radius: 4px;\n}\n.u-dropdown-searchbar:hover {\n  background-color: hsla(0, 100%, 100%, 0.5);\n}\n.u-dropdown-searchbar:focus {\n  background-color: white;\n  color: black;\n}\n.blocklyDropDownDiv .goog-menu {\n  overflow-x: hidden;\n}\n", ""])
    },
    1559: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, '.sa-color-picker {\n  display: flex;\n}\n\n.sa-color-picker-code {\n  margin: 8px 0;\n}\n\n.sa-color-picker-paint {\n  margin-top: 16px;\n  margin-bottom: 4px;\n}\n\n.sa-color-picker > .sa-color-picker-color {\n  border: none;\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  padding: 0;\n  padding-left: 0.6rem;\n  padding-right: 0.4rem;\n  margin-left: 0.5rem;\n  outline: none;\n  box-sizing: border-box;\n  width: 3rem;\n  height: 2rem;\n}\n[theme="dark"] .sa-color-picker > .sa-color-picker-color {\n  background: var(--ui-secondary);\n}\n\n.sa-color-picker > .sa-color-picker-text {\n  box-sizing: border-box;\n  width: calc(150px - 3rem);\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-color {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 1rem;\n  border-bottom-right-radius: 1rem;\n  margin-left: 0;\n  margin-right: 0.5rem;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-text {\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\nbody.sa-hide-eye-dropper-background div[class*="stage_color-picker-background"] {\n  /* Do not show eye dropper background if the color picker is "fake" */\n  display: none;\n}\n', ""])
    },
    1560: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, '.sa-onion-button {\n  position: relative;\n}\n.sa-onion-button:focus-within {\n  background-color: hsla(0, 100%, 65%, 0.2);\n}\n.sa-onion-button[data-enabled="true"] .sa-onion-image {\n  filter: brightness(0) invert(1);\n}\n.sa-onion-button[data-enabled="true"] {\n  background-color: #ff4c4c;\n}\n\n.sa-onion-group {\n  position: relative;\n  flex-direction: row;\n}\n\n.sa-onion-settings-wrapper {\n  position: absolute;\n  justify-items: center;\n  left: 50%;\n  width: 1.95rem;\n  height: 1.95rem;\n  display: grid;\n}\n\n.sa-onion-settings {\n  position: absolute;\n  bottom: 100%;\n  /* based on the styles for the color dropdown */\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  transition-property: bottom, opacity;\n  transition-duration: 500ms;\n  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  opacity: 0;\n  pointer-events: none;\n  background: white;\n  color: black;\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n}\n.sa-onion-settings[data-visible="true"] {\n  bottom: calc(100% + 22px);\n  pointer-events: auto;\n  opacity: 1;\n}\n\n.sa-onion-settings-line {\n  display: flex;\n  justify-content: flex-end;\n  align-items: baseline;\n  gap: 0.25em;\n}\n\n.sa-onion-settings-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  border: 0;\n  background: transparent;\n  -moz-appearance: textfield;\n  border: 0;\n  outline: 0;\n}\n\n.sa-onion-settings-input::-webkit-outer-spin-button,\n.sa-onion-settings-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.sa-onion-settings-tip {\n  position: absolute;\n  bottom: 0;\n  transform: translateY(100%);\n  right: calc(50% - 7px);\n}\n.sa-onion-settings-polygon {\n  fill: white;\n  stroke: #ddd;\n}\n\n.sa-onion-settings-label {\n  white-space: nowrap;\n}\n', ""])
    },
    1563: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, '.sa-stage-color-picker-picking [class^="stage_color-picker-background_"] {\n  display: none;\n}\n', ""])
    },
    1582: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, '.sa-folders-contextmenu-item {\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[sa-folders-context-type="folder"] .react-contextmenu > :not(.sa-ctx-menu) {\n  display: none;\n}\n', ""])
    },
    1593: function(e, t, o) {
        (e.exports = o(9)(!1)).push([e.i, ".sa-comment-preview-outer {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100000000;\n  pointer-events: none;\n}\n\n.sa-comment-preview-inner {\n  width: calc(200px - 16px);\n  max-height: calc(132px - 8px);\n  padding: 8px;\n  overflow: hidden;\n\n  font-size: 12px;\n  white-space: pre-wrap;\n  pointer-events: none;\n\n  color: rgb(87, 94, 117);\n  background-color: rgb(255 255 255 / 90%);\n  border-style: none;\n  border-radius: 8px;\n  filter: drop-shadow(0px 5px 5px rgb(0 0 0 / 10%));\n\n  transform: perspective(200px);\n}\n\n@supports (backdrop-filter: blur(16px)) {\n  .sa-comment-preview-inner {\n    background-color: rgb(255 255 255 / 75%);\n    backdrop-filter: blur(16px);\n  }\n}\n\n.sa-comment-preview-fade {\n  transition: opacity 0.1s, filter 0.1s, transform 0.1s linear;\n}\n\n.sa-comment-preview-hidden {\n  opacity: 0;\n  filter: none;\n  transform: perspective(200px) translateZ(-20px);\n}\n\n.sa-comment-preview-reduce-transparency {\n  background-color: rgb(255 255 255);\n  backdrop-filter: none;\n}\n", ""])
    },
    1606: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return s
        }));
        const n = e => {
            if ("/decrement.svg" === e)
                return "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg==";
            if ("/increment.svg" === e)
                return "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwKSIgc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUtMTIuNjQyaDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg==";
            if ("/settings.svg" === e)
                return "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9Im9wYWNpdHk6Ljc1O2ZpbGw6bm9uZTtzdHJva2U6IzAwMDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgZD0iTTU2IDE2djk2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMi4zNzYgLTIuMzc2KSBzY2FsZSguMjI0NjIpIi8+PHBhdGggc3R5bGU9Im9wYWNpdHk6LjU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNNDAgMzJ2NjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouMjU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNMjQgNDh2MzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouNzU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNNzIgMTZ2OTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouNTtmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik04OCAzMnY2NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIuMzc2IC0yLjM3Nikgc2NhbGUoLjIyNDYyKSIvPjxwYXRoIHN0eWxlPSJvcGFjaXR5Oi4yNTtmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik0xMDQgNDh2MzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48L3N2Zz4=";
            if ("/toggle.svg" === e)
                return "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PGcgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZT0iIzAwMTAyNiI+PGcgc3R5bGU9Im9wYWNpdHk6LjU7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTpub25lIj48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgZmlsbD0iI2JmYmZiZiIgZD0iTTY4LjQ1IDMyLjQ1N2MuMy0uMi44LS4xLjkuM2wyLjYgMTAuN3M2LjQgNC43IDguMyA4YzMuMiA1LjUgMy4zIDEwIDMuMyAxMHM3LjEgMi4xIDguMyA3LjhjMS4yIDUuNy0zLjIgMTYuNS0yMiAyMC4yLTE4LjggMy43LTMzLjktMS40LTQxLTEyLjgtNy4xLTExLjQgNC4xLTI1IDMuNS0yNC4ybC0yLjEtMTcuOWMtLjEtLjQuNC0uNy44LS41bDEyLjEgNy45czQuNS0xLjcgOS4yLTEuOWMyLjgtLjIgNS4yIDAgNy41LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC42NTIgLTQuNjUpIHNjYWxlKC4yMzI5KSIvPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik0xMDEuNjUgNjIuOTU3Yy00LjcgMy44LTExLjkgMy45LTExLjkgMy45bTEwLjYgNy4zYy02LjMuNS0xMC4yLTEuNC0xMC4yLTEuNG0tNjguOC0xMC4xczguNiAyLjggMTIuMSA1LjltLjMgMy41Yy00LjMgMS43LTExLjcuNi0xMS43LjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00LjY1MiAtNC42NSkgc2NhbGUoLjIzMjkpIi8+PC9nPjxnIHN0eWxlPSJvcGFjaXR5Oi43NTtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmUiPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBmaWxsPSIjYmZiZmJmIiBkPSJNNjguNDUgMzIuNDU3Yy4zLS4yLjgtLjEuOS4zbDIuNiAxMC43czYuNCA0LjcgOC4zIDhjMy4yIDUuNSAzLjMgMTAgMy4zIDEwczcuMSAyLjEgOC4zIDcuOGMxLjIgNS43LTMuMiAxNi41LTIyIDIwLjItMTguOCAzLjctMzMuOS0xLjQtNDEtMTIuOC03LjEtMTEuNCA0LjEtMjUgMy41LTI0LjJsLTIuMS0xNy45Yy0uMS0uNC40LS43LjgtLjVsMTIuMSA3LjlzNC41LTEuNyA5LjItMS45YzIuOC0uMiA1LjIgMCA3LjUuNHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjMyMyAtMi4zMjEpIHNjYWxlKC4yMzI5KSIvPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik0xMDEuNjUgNjIuOTU3Yy00LjcgMy44LTExLjkgMy45LTExLjkgMy45bTEwLjYgNy4zYy02LjMuNS0xMC4yLTEuNC0xMC4yLTEuNG0tNjguOC0xMC4xczguNiAyLjggMTIuMSA1LjltLjMgMy41Yy00LjMgMS43LTExLjcuNi0xMS43LjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjMyMyAtMi4zMjEpIHNjYWxlKC4yMzI5KSIvPjwvZz48ZyBzdHlsZT0ic3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTpub25lIj48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgZmlsbD0iI2JmYmZiZiIgZD0iTTczLjQ1IDM3LjQ1N2MuMy0uMi44LS4xLjkuM2wyLjYgMTAuN3M2LjQgNC43IDguMyA4YzMuMiA1LjUgMy4zIDEwIDMuMyAxMHM3LjEgMi4xIDguMyA3LjhjMS4yIDUuNy0zLjIgMTYuNS0yMiAyMC4yLTE4LjggMy43LTMzLjktMS40LTQxLTEyLjgtNy4xLTExLjQgNC4xLTI1IDMuNS0yNC4ybC0yLjEtMTcuOWMtLjEtLjQuNC0uNy44LS41bDEyLjEgNy45czQuNS0xLjcgOS4yLTEuOWMyLjgtLjIgNS4yIDAgNy41LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS4xNTkgLTEuMTU3KSBzY2FsZSguMjMyOSkiLz48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBmaWxsPSJub25lIiBkPSJNMTA2LjY1IDY3Ljk1N2MtNC43IDMuOC0xMS45IDMuOS0xMS45IDMuOW0xMC42IDcuM2MtNi4zLjUtMTAuMi0xLjQtMTAuMi0xLjRtLTY4LjgtMTAuMXM4LjYgMi44IDEyLjEgNS45bS4zIDMuNWMtNC4zIDEuNy0xMS43LjYtMTEuNy42IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS4xNTkgLTEuMTU3KSBzY2FsZSguMjMyOSkiLz48L2c+PC9nPjwvc3ZnPg==";
            throw new Error("Unknown asset: ".concat(e))
        };
        var r = o(1560);
        const s = {
            "userscript.js": async function({addon: e, console: t, msg: o}) {
                const r = await e.tab.traps.getPaper(),
                    s = await e.tab.waitForElement("[class^='paint-editor_canvas-container']");
                try {
                    if (!("colorIndex" in e.tab.redux.state.scratchPaint.fillMode))
                        return void t.error("Detected new paint editor; this will be supported in future versions.")
                } catch (e) {}
                const a = s[e.tab.traps.getInternalKey(s)].child.child.child.stateNode,
                    i = [],
                    c = e => {
                        const t = e.substr(1),
                            o = parseInt(t, 16);
                        return [o >> 16 & 255, o >> 8 & 255, 255 & o]
                    },
                    l = {
                        enabled: e.settings.get("default") && !e.self.disabled,
                        previous: +e.settings.get("previous"),
                        next: +e.settings.get("next"),
                        opacity: +e.settings.get("opacity"),
                        opacityStep: +e.settings.get("opacityStep"),
                        layering: e.settings.get("layering"),
                        mode: e.settings.get("mode"),
                        beforeTint: c(e.settings.get("beforeTint")),
                        afterTint: c(e.settings.get("afterTint"))
                    },
                    d = () => r.project.layers.find(e => e.data.isBackgroundGuideLayer).children[0].position;
                let u = 0;
                const p = () => ++u,
                    h = () => {
                        p();
                        const e = r.project;
                        if (!e)
                            return;
                        i.length = 0;
                        const t = e.layers;
                        for (let e = t.length - 1; e >= 0; e--) {
                            const o = t[e];
                            o.data.sa_isOnionLayer && o.remove()
                        }
                    },
                    f = () => {
                        const e = r.project;
                        if (!e)
                            return;
                        const t = e.layers.find(e => e.data.sa_isOnionLayer);
                        if (t)
                            if ("front" === l.layering)
                                e.addLayer(t);
                            else {
                                0 === e.layers.find(e => e.data.isRasterLayer).index ? e.insertLayer(0, t) : e.insertLayer(1, t)
                            }
                    },
                    m = (e, t) => {
                        if (e.children)
                            for (const o of e.children)
                                m(o, t);
                        t(e)
                    },
                    g = (e, t, o, n) => {
                        const r = n ? l.beforeTint : l.afterTint,
                            s = (e + t + o) / 3 / 255 / 1.5 + (1 - 1 / 1.5);
                        return [r[0] * s, r[1] * s, r[2] * s]
                    },
                    b = (e, t) => (([e, t, o]) => {
                        const n = Math.round(e).toString(16).padStart(2, "0"),
                            r = Math.round(t).toString(16).padStart(2, "0"),
                            s = Math.round(o).toString(16).padStart(2, "0");
                        return "#".concat(n).concat(r).concat(s)
                    })(g(255 * e.red, 255 * e.green, 255 * e.blue, t)),
                    y = (e, t) => {
                        const {width: o, height: n} = e.canvas,
                            r = e.context,
                            s = r.getImageData(0, 0, o, n),
                            a = s.data;
                        for (let e = 0; e < a.length; e += 4) {
                            const o = a[e + 0],
                                n = a[e + 1],
                                r = a[e + 2];
                            if (0 === a[e + 3])
                                continue;
                            const s = g(o, n, r, t);
                            a[e + 0] = s[0],
                            a[e + 1] = s[1],
                            a[e + 2] = s[2]
                        }
                        r.putImageData(s, 0, 0)
                    },
                    v = e => {
                        const t = e.strokeBounds,
                            {width: o, height: n} = t,
                            s = Math.min(3e3 / o, 3e3 / n),
                            a = new r.Raster(new r.Size(o, n));
                        a.remove(),
                        a.smoothing = !0,
                        a.guide = !0,
                        a.locked = !0;
                        let i = 0;
                        const c = a.draw;
                        return a.draw = function(...a) {
                            const l = this.getView().getZoom() * window.devicePixelRatio,
                                d = Math.max(1, Math.min(s, 2 ** Math.ceil(Math.log2(l))));
                            if (d > i) {
                                i = d;
                                const s = this.canvas,
                                    a = this.context,
                                    c = o * d,
                                    l = n * d;
                                s.width = c,
                                s.height = l,
                                this._size = new r.Size(c, l);
                                const u = t.getTopLeft(),
                                    p = t.getBottomRight(),
                                    h = new r.Size(p.subtract(u)),
                                    f = (new r.Matrix).scale(d).translate(u.negate());
                                a.save(),
                                f.applyToContext(a),
                                e.draw(a, new r.Base({
                                    matrices: [f]
                                })),
                                a.restore(),
                                this.matrix.reset(),
                                this.transform((new r.Matrix).translate(u.add(h.divide(2))).scale(1 / d))
                            }
                            return c.call(this, ...a)
                        }, a
                    },
                    k = (e, t, o, n) => new Promise((s, a) => {
                        const {rotationCenterX: i, rotationCenterY: c} = t,
                            u = (o = (o = o.split(/<\s*svg:/).join("<")).split(/<\/\s*svg:/).join("</")).match(/<svg [^>]*>/);
                        u && -1 === u[0].indexOf("xmlns=") && (o = o.replace("<svg ", '<svg xmlns="http://www.w3.org/2000/svg" '));
                        const p = (new DOMParser).parseFromString(o, "text/xml"),
                            h = p.documentElement.attributes.viewBox ? p.documentElement.attributes.viewBox.value.match(/\S+/g) : null;
                        if (h)
                            for (let e = 0; e < h.length; e++)
                                h[e] = parseFloat(h[e]);
                        r.project.importSVG(o, {
                            expandShapes: !0,
                            insert: !1,
                            onLoad: t => {
                                t ? s((e => {
                                    const t = [];
                                    return m(e, e => {
                                        e instanceof r.Raster && t.push(new Promise((t, o) => {
                                            e.on("load", () => t()),
                                            e.on("error", () => o(new Error("Raster inside SVG failed to load")))
                                        }))
                                    }), Promise.all(t)
                                })(t).then(() => (t => {
                                    if (t.opacity = e, m(t, e => {
                                        "PathItem" === e.className && (e.clockwise = !0),
                                        "PointText" === e.className || e.children || e.strokeWidth && (e.strokeWidth = 2 * e.strokeWidth),
                                        e.locked = !0,
                                        e.guide = !0
                                    }), t.scale(2, new r.Point(0, 0)), "tint" === l.mode) {
                                        const e = new Set;
                                        m(t, t => {
                                            if (t.strokeColor && (t.strokeColor = b(t.strokeColor, n)), t.fillColor) {
                                                const o = t.fillColor.gradient;
                                                if (o) {
                                                    if (e.has(o))
                                                        return;
                                                    e.add(o);
                                                    for (const e of o.stops)
                                                        e.color = b(e.color, n)
                                                } else
                                                    t.fillColor = b(t.fillColor, n)
                                            }
                                            t.canvas && y(t, n)
                                        })
                                    }
                                    const o = d();
                                    if (void 0 !== i && void 0 !== c) {
                                        let e = new r.Point(i, c);
                                        h && h.length >= 2 && !isNaN(h[0]) && !isNaN(h[1]) && (e = e.subtract(h[0], h[1])),
                                        t.translate(o.subtract(e.multiply(2)))
                                    } else
                                        t.translate(o.subtract(t.bounds.width, t.bounds.height));
                                    return v(t)
                                })(t))) : a(new Error("could not load onion skin"))
                            }
                        })
                    }),
                    w = async () => {
                        const o = r.project;
                        if (!o)
                            return;
                        const n = (() => {
                            const e = document.querySelector("[class*='selector_list-item'][class*='sprite-selector-item_is-selected']");
                            if (!e)
                                return -1;
                            const t = e.querySelector("[class*='sprite-selector-item_number']");
                            return t ? +t.textContent - 1 : -1
                        })();
                        if (-1 === n)
                            return;
                        h();
                        const s = p(),
                            a = e.tab.traps.vm;
                        if (!a)
                            return;
                        const i = o.activeLayer,
                            c = a.editingTarget.sprite.costumes,
                            m = Math.max(0, n - l.previous),
                            g = Math.min(c.length - 1, n + l.next);
                        try {
                            const e = [];
                            for (let t = m; t <= g; t++) {
                                if (t === n)
                                    continue;
                                const o = t < n,
                                    r = Math.abs(t - n) - 1,
                                    s = (l.opacity - l.opacityStep * r) / 100;
                                s <= 0 || e.push({
                                    index: t,
                                    isBefore: o,
                                    opacity: s
                                })
                            }
                            const t = await Promise.all(e.map(({index: e, isBefore: t, opacity: o}) => {
                                const n = c[e],
                                    s = a.getCostume(e);
                                if ("svg" === n.dataFormat)
                                    return k(o, n, s, t);
                                if ("png" === n.dataFormat || "jpg" === n.dataFormat)
                                    return ((e, t, o, n) => new Promise((s, a) => {
                                        let {rotationCenterX: i, rotationCenterY: c} = t;
                                        const u = new Image;
                                        u.onload = () => {
                                            const t = d(),
                                                o = Math.min(2 * t.x, u.width),
                                                a = Math.min(2 * t.y, u.height);
                                            void 0 === i && (i = o / 2),
                                            void 0 === c && (c = a / 2);
                                            const p = new r.Raster(u);
                                            p.opacity = e,
                                            p.guide = !0,
                                            p.locked = !0;
                                            const h = o / 2 + (t.x - i),
                                                f = a / 2 + (t.y - c);
                                            p.position = new r.Point(h, f),
                                            p.remove(),
                                            "tint" === l.mode && y(p, n),
                                            s(p)
                                        },
                                        u.onerror = () => {
                                            a(new Error("could not load image"))
                                        },
                                        u.src = o
                                    }))(o, n, s, t);
                                throw new Error("Unknown data format: ".concat(n.dataFormat))
                            }));
                            if (u === s) {
                                const e = (() => {
                                    const e = new r.Layer;
                                    return e.locked = !0, e.guide = !0, e.data.sa_isOnionLayer = !0, e
                                })();
                                for (const o of t)
                                    e.addChild(o);
                                f()
                            }
                        } catch (e) {
                            t.error(e)
                        }
                        i.activate()
                    },
                    x = e => {
                        l.enabled !== e && (l.enabled = e, l.enabled ? (0 === l.next && 0 === l.previous && (l.previous = 1, O.previous.value = l.previous), 0 === l.opacity && (l.opacity = 25, O.opacity.value = l.opacity), w()) : h(), E.dataset.enabled = l.enabled)
                    },
                    _ = e => {
                        0 === l.previous && 0 === l.next || 0 === l.opacity ? x(!1) : l.enabled ? e ? f() : w() : (l.previous > 0 || l.next > 0) && x(!0)
                    },
                    T = () => {
                        const e = document.createElement("div");
                        return e.className = "sa-onion-group", e
                    },
                    I = ({useButtonTag: e}={}) => {
                        const t = document.createElement(e ? "button" : "span");
                        return t.className = "sa-onion-button", t.setAttribute("role", "button"), t
                    },
                    C = e => {
                        const t = document.createElement("img");
                        return t.className = "sa-onion-image", t.draggable = !1, t.dataset.image = e, t.loading = "lazy", t.src = n("/" + e + ".svg"), t
                    },
                    L = T();
                e.tab.displayNoneWhileDisabled(L, {
                    display: "flex"
                });
                const E = I();
                E.dataset.enabled = l.enabled,
                E.addEventListener("click", () => x(!l.enabled)),
                E.title = o("toggle"),
                E.appendChild(C("toggle"));
                const N = I();
                N.addEventListener("click", () => M(!A())),
                N.title = o("settings"),
                N.appendChild(C("settings"));
                const S = document.createElement("div");
                S.className = "sa-onion-settings-wrapper",
                L.append(S, E, N);
                const D = document.createElement("div");
                D.className = "sa-onion-settings";
                const M = e => {
                        N.dataset.enabled = e,
                        D.dataset.visible = e
                    },
                    A = () => "true" === D.dataset.visible,
                    O = {};
                for (const e of ["previous", "next", "opacity", "opacityStep"]) {
                    const t = document.createElement("label");
                    t.className = "sa-onion-settings-line";
                    const n = document.createElement("div");
                    n.className = "sa-onion-settings-label",
                    n.textContent = o(e),
                    t.appendChild(n);
                    const r = T(),
                        s = I(),
                        a = document.createElement("div");
                    a.style.width = "20px",
                    s.appendChild(a);
                    const i = document.createElement("input");
                    O[e] = i,
                    i.className = "sa-onion-settings-input",
                    i.type = "number",
                    i.step = "1",
                    i.min = "0",
                    i.max = "100",
                    i.value = l[e],
                    i.addEventListener("input", t => {
                        if (0 === i.value.length)
                            return l[e] = 0, void _();
                        let o = +i.value;
                        o > +i.max ? o = +i.max : o < 0 && (o = 0),
                        i.value = o,
                        l[e] = o,
                        _()
                    }),
                    i.addEventListener("blur", () => {
                        i.value || (i.value = "0")
                    }),
                    s.appendChild(i);
                    const c = I();
                    c.appendChild(C("decrement")),
                    c.addEventListener("click", () => {
                        l[e] > 0 && (l[e]--, i.value = l[e], _())
                    });
                    const d = I();
                    d.appendChild(C("increment")),
                    d.addEventListener("click", () => {
                        l[e] < +i.max && (l[e]++, i.value = l[e], _())
                    }),
                    r.appendChild(c),
                    r.appendChild(s),
                    r.appendChild(d),
                    t.appendChild(r),
                    D.appendChild(t)
                }
                const j = document.createElement("div");
                j.className = "sa-onion-settings-line";
                const B = document.createElement("div");
                B.className = "sa-onion-settings-label",
                B.textContent = o("mode");
                const R = T();
                j.appendChild(B);
                const z = I({
                    useButtonTag: !0
                });
                z.appendChild(document.createTextNode(o("merge"))),
                R.appendChild(z),
                z.addEventListener("click", e => {
                    l.mode = "merge",
                    W.dataset.enabled = !1,
                    z.dataset.enabled = !0,
                    _()
                }),
                z.dataset.enabled = "merge" === l.mode;
                const W = I({
                    useButtonTag: !0
                });
                W.appendChild(document.createTextNode(o("tint"))),
                R.appendChild(W),
                W.addEventListener("click", e => {
                    l.mode = "tint",
                    W.dataset.enabled = !0,
                    z.dataset.enabled = !1,
                    _()
                }),
                W.dataset.enabled = "tint" === l.mode,
                j.appendChild(R),
                D.appendChild(j);
                const Z = document.createElement("div");
                Z.className = "sa-onion-settings-line";
                const P = document.createElement("div");
                P.className = "sa-onion-settings-label",
                P.textContent = o("layering");
                const U = T();
                Z.appendChild(P);
                const G = I({
                    useButtonTag: !0
                });
                G.appendChild(document.createTextNode(o("front"))),
                U.appendChild(G),
                G.addEventListener("click", e => {
                    l.layering = "front",
                    H.dataset.enabled = !1,
                    G.dataset.enabled = !0,
                    _(!0)
                }),
                G.dataset.enabled = "front" === l.layering;
                const H = I({
                    useButtonTag: !0
                });
                H.appendChild(document.createTextNode(o("behind"))),
                U.appendChild(H),
                H.addEventListener("click", e => {
                    l.layering = "behind",
                    H.dataset.enabled = !0,
                    G.dataset.enabled = !1,
                    _(!0)
                }),
                H.dataset.enabled = "behind" === l.layering,
                Z.appendChild(U),
                D.appendChild(Z);
                const Y = "http://www.w3.org/2000/svg",
                    V = document.createElementNS(Y, "svg");
                V.setAttribute("class", "sa-onion-settings-tip"),
                V.setAttribute("width", "14"),
                V.setAttribute("height", "7");
                const F = document.createElementNS(Y, "polygon");
                F.setAttribute("class", "sa-onion-settings-polygon"),
                F.setAttribute("points", "0,0 7,7, 14,0"),
                V.appendChild(F),
                D.appendChild(V);
                let X = null;
                e.self.addEventListener("disabled", () => {
                    M(!1),
                    X = l.enabled,
                    x(!1)
                }),
                e.self.addEventListener("reenabled", () => {
                    x(X)
                });
                (() => {
                    const e = r.Project.prototype.addLayer;
                    r.Project.prototype.addLayer = function(t) {
                        const o = e.call(this, t);
                        if (t.data.isBackgroundGuideLayer) {
                            let t;
                            for (; t = i.shift();)
                                e.call(this, t);
                            f()
                        }
                        return o
                    };
                    const t = r.Project.prototype.importJSON;
                    r.Project.prototype.importJSON = function(e) {
                        const o = t.call(this, e);
                        return l.enabled && w(), o
                    };
                    const o = r.Layer.prototype.remove;
                    r.Layer.prototype.remove = function() {
                        if (this.data.isBackgroundGuideLayer) {
                            for (const e of r.project.layers)
                                e.data.sa_isOnionLayer && i.push(e);
                            for (const e of i)
                                e.remove()
                        }
                        return o.call(this)
                    }
                })(),
                (() => {
                    let e = !1;
                    const t = a.constructor,
                        o = t.prototype.importImage;
                    t.prototype.importImage = function(...t) {
                        return e = !0, h(), o.call(this, ...t)
                    };
                    const n = t.prototype.recalibrateSize;
                    t.prototype.recalibrateSize = function(t) {
                        return n.call(this, () => {
                            t && t(),
                            e && (e = !1, l.enabled && w())
                        })
                    },
                    a.recalibrateSize = t.prototype.recalibrateSize.bind(a),
                    a.importImage = t.prototype.importImage.bind(a)
                })(),
                (async () => {
                    let t = !1;
                    for (;;) {
                        const o = (await e.tab.waitForElement("[class^='paint-editor_canvas-controls']", {
                            markAsSeen: !0,
                            reduxEvents: ["scratch-gui/navigation/ACTIVATE_TAB", "scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE", "scratch-gui/targets/UPDATE_TARGET_LIST"],
                            reduxCondition: e => 1 === e.scratchGui.editorTab.activeTabIndex && !e.scratchGui.mode.isPlayerOnly
                        })).querySelector("[class^='paint-editor_zoom-controls']");
                        if (e.tab.appendToSharedSpace({
                            space: "paintEditorZoomControls",
                            element: L,
                            order: 1
                        }), S.appendChild(D), !t) {
                            t = !0;
                            const e = o.firstChild.className,
                                n = o.firstChild.firstChild.className,
                                r = o.firstChild.firstChild.firstChild.className;
                            for (const t of document.querySelectorAll(".sa-onion-group"))
                                t.className += " " + e;
                            for (const e of document.querySelectorAll(".sa-onion-button"))
                                e.className += " " + n;
                            for (const e of document.querySelectorAll(".sa-onion-image"))
                                e.className += " " + r
                        }
                        l.enabled && w()
                    }
                })()
            },
            "style.css": o.n(r).a
        }
    },
    1607: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return c
        }));
        class n {
            constructor(e)
            {
                this.addon = e,
                this.vm = e.tab.traps.vm,
                this.events = []
            }
            triggerDragAndDrop(e, t, o, n)
            {
                n = n || !1;
                let r = function(e, t, o, r) {
                        let s = document.createEvent("MouseEvents");
                        s.initMouseEvent(e, !0, !0, window, 1, 1, 1, o, r, n, !1, !1, !1, 0, t),
                        t.dispatchEvent(s)
                    },
                    s = e,
                    a = t;
                if (!s)
                    return !1;
                let i = s.getBoundingClientRect(),
                    c = Math.floor((i.left + i.right) / 2),
                    l = Math.floor((i.top + i.bottom) / 2);
                if (r("mouseover", s, c, l), r("mousedown", s, c, l), r("dragstart", s, c, l), r("drag", s, c, l), r("mousemove", s, c, l), !a) {
                    if (o) {
                        let e = o.x,
                            t = o.y;
                        r("drag", s, e, t),
                        r("mousemove", s, e, t)
                    }
                    return !1
                }
                i = a.getBoundingClientRect();
                let d = Math.floor((i.left + i.right) / 2),
                    u = Math.floor((i.top + i.bottom) / 2);
                return r("drag", s, d, u), r("mousemove", a, d, u), r("mouseenter", a, d, u), r("dragenter", a, d, u), r("mouseover", a, d, u), r("dragover", a, d, u), r("drop", a, d, u), r("dragend", s, d, u), r("mouseup", s, d, u), !0
            }
            bindOnce(e, t, o, n)
            {
                n = !!n,
                e.removeEventListener(t, o, n),
                e.addEventListener(t, o, n),
                this.events.push(new r(e, t, o, n))
            }
            unbindAllEvents()
            {
                for (const e of this.events)
                    e.dom.removeEventListener(e.event, e.func, e.capture);
                this.events = []
            }
        }
        class r {
            constructor(e, t, o, n)
            {
                this.dom = e,
                this.event = t,
                this.func = o,
                this.capture = n
            }
        }
        class s {
            static startUndoGroup(e)
            {
                const t = e.undoStack_;
                t.length && (t[t.length - 1]._devtoolsLastUndo = !0)
            }
            static endUndoGroup(e)
            {
                const t = e.undoStack_;
                setTimeout(() => {
                    const e = function() {
                        const e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%()*+,-./:;=?@[]^_`{|}~";
                        let t = "";
                        for (let o = 0; o < 20; o++)
                            t += e[Math.floor(Math.random() * e.length)];
                        return t
                    }();
                    for (let o = t.length - 1; o >= 0 && !t[o]._devtoolsLastUndo; o--)
                        t[o].group = e
                }, 0)
            }
        }
        class a {
            constructor(e, t, o)
            {
                this.addon = e,
                this.msg = t,
                this.m = o,
                this.domHelpers = new n(e),
                this.codeTab = null,
                this.costTab = null,
                this.costTabBody = null,
                this.selVarID = null,
                this.canShare = !1,
                this.mouseXY = {
                    x: 0,
                    y: 0
                }
            }
            async init()
            {
                for (this.addContextMenus();;) {
                    const e = await this.addon.tab.waitForElement("ul[class*=gui_tab-list_]", {
                        markAsSeen: !0,
                        reduxEvents: ["scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE"],
                        reduxCondition: e => !e.scratchGui.mode.isPlayerOnly
                    });
                    this.initInner(e)
                }
            }
            async addContextMenus()
            {
                const e = await this.addon.tab.traps.getBlockly(),
                    t = e.WorkspaceSvg.prototype.cleanUp,
                    o = this;
                e.WorkspaceSvg.prototype.cleanUp = function() {
                    o.addon.settings.get("enableCleanUpPlus") ? o.doCleanUp() : t.call(this)
                };
                let n = e.Msg.CLEAN_UP;
                this.addon.settings.get("enableCleanUpPlus") && (e.Msg.CLEAN_UP = this.m("clean-plus")),
                this.addon.settings.addEventListener("change", () => {
                    this.addon.settings.get("enableCleanUpPlus") ? e.Msg.CLEAN_UP = this.m("clean-plus") : e.Msg.CLEAN_UP = n
                }),
                this.addon.tab.createBlockContextMenu((t, o) => (t.push({
                    enabled: e.clipboardXml_,
                    text: this.m("paste"),
                    separator: !0,
                    _isDevtoolsFirstItem: !0,
                    callback: () => {
                        let e = this.getTopBlockIDs();
                        document.dispatchEvent(new KeyboardEvent("keydown", {
                            keyCode: 86,
                            ctrlKey: !0,
                            griff: !0
                        })),
                        setTimeout(() => {
                            this.beginDragOfNewBlocksNotInIDs(e)
                        }, 10)
                    }
                }), t), {
                    workspace: !0
                }),
                this.addon.tab.createBlockContextMenu((e, t) => (e.push({
                    enabled: !0,
                    text: this.m("make-space"),
                    _isDevtoolsFirstItem: !0,
                    callback: () => {
                        this.doCleanUp(t)
                    },
                    separator: !0
                }, {
                    enabled: !0,
                    text: this.m("copy-all"),
                    callback: () => {
                        this.eventCopyClick(t)
                    },
                    separator: !0
                }, {
                    enabled: !0,
                    text: this.m("copy-block"),
                    callback: () => {
                        this.eventCopyClick(t, 1)
                    }
                }, {
                    enabled: !0,
                    text: this.m("cut-block"),
                    callback: () => {
                        this.eventCopyClick(t, 2)
                    }
                }), e), {
                    blocks: !0
                }),
                this.addon.tab.createBlockContextMenu((e, t) => ("data" !== t.getCategory() && "data-lists" !== t.getCategory() || (this.selVarID = t.getVars()[0], e.push({
                    enabled: !0,
                    text: this.m("swap", {
                        var: "data" === t.getCategory() ? this.m("variables") : this.m("lists")
                    }),
                    callback: () => {
                        let e = this.getWorkspace().getVariableById(this.selVarID),
                            t = window.prompt(this.msg("replace", {
                                name: e.name
                            }));
                        t && this.doReplaceVariable(this.selVarID, t, e.type)
                    },
                    separator: !0
                })), e), {
                    blocks: !0,
                    flyout: !0
                })
            }
            getWorkspace()
            {
                return Blockly.getMainWorkspace()
            }
            isCostumeEditor()
            {
                return this.costTab.className.indexOf("gui_is-selected") >= 0
            }
            getTopBlocks()
            {
                let e = this.getOrderedTopBlockColumns().cols,
                    t = [];
                for (const o of e)
                    t = t.concat(o.blocks);
                return t
            }
            doCleanUp(e)
            {
                let t = this.getWorkspace(),
                    o = e && e.getRootBlock();
                s.startUndoGroup(t);
                let n = this.getOrderedTopBlockColumns(!0),
                    r = n.cols,
                    a = n.orphans.blocks.length;
                if (a > 0 && !e) {
                    let e = this.msg("orphaned", {
                        count: a
                    });
                    if (confirm(e))
                        for (const e of n.orphans.blocks)
                            e.dispose();
                    else
                        r.unshift(n.orphans)
                }
                let i = 48,
                    c = n.maxWidths;
                for (const e of r) {
                    let t = 64,
                        n = 0;
                    for (const r of e.blocks) {
                        let e = r === o ? 380 : 0,
                            s = r === o ? 480 : 72,
                            a = r.getRelativeToSurfaceXY();
                        i - a.x == 0 && t - a.y == 0 || r.moveBy(i - a.x, t - a.y);
                        let l = r.getHeightWidth();
                        t += l.height + s;
                        let d = c[r.id] || 0;
                        n = Math.max(n, Math.max(l.width + e, d))
                    }
                    i += n + 96
                }
                let l = t.getTopComments();
                for (const e of l)
                    e.setVisible && (e.setVisible(!1), e.needsAutoPositioning_ = !0, e.setVisible(!0));
                setTimeout(() => {
                    let e = this.getWorkspace(),
                        t = e.getVariableMap(),
                        o = t.getVariablesOfType(""),
                        n = [];
                    for (const e of o)
                        if (e.isLocal) {
                            let o = t.getVariableUsesById(e.getId());
                            o && 0 !== o.length || n.push(e)
                        }
                    if (n.length > 0) {
                        const t = n.length;
                        let o = this.msg("unused-var", {
                            count: t
                        });
                        for (let e = 0; e < n.length; e++) {
                            let t = n[e];
                            e > 0 && (o += ", "),
                            o += t.name
                        }
                        if (confirm(o))
                            for (const t of n)
                                e.deleteVariableById(t.getId())
                    }
                    let r = t.getVariablesOfType("list"),
                        a = [];
                    for (const e of r)
                        if (e.isLocal) {
                            let o = t.getVariableUsesById(e.getId());
                            o && 0 !== o.length || a.push(e)
                        }
                    if (a.length > 0) {
                        const t = a.length;
                        let o = this.msg("unused-list", {
                            count: t
                        });
                        for (let e = 0; e < a.length; e++) {
                            let t = a[e];
                            e > 0 && (o += ", "),
                            o += t.name
                        }
                        if (confirm(o))
                            for (const t of a)
                                e.deleteVariableById(t.getId())
                    }
                    s.endUndoGroup(e)
                }, 100)
            }
            isBlockAnOrphan(e)
            {
                return !!e.outputConnection
            }
            getOrderedTopBlockColumns(e)
            {
                let t = this.getWorkspace(),
                    o = t.getTopBlocks(),
                    n = {};
                if (e) {
                    let e = t.getTopComments();
                    for (const t of e)
                        if (t.setVisible) {
                            t.setVisible(!1),
                            t.needsAutoPositioning_ = !0,
                            t.setVisible(!0);
                            let e = t.getBoundingRectangle().bottomRight.x,
                                o = t.block_.getRootBlock(),
                                r = o.getBoundingRectangle().topLeft.x;
                            n[o.id] = Math.max(e - r, n[o.id] || 0)
                        }
                }
                let r = [];
                let s = {
                    x: -999999,
                    count: 0,
                    blocks: []
                };
                for (const t of o) {
                    let o = t.getRelativeToSurfaceXY(),
                        n = null,
                        a = 256;
                    if (e && this.isBlockAnOrphan(t))
                        s.blocks.push(t);
                    else {
                        for (const e of r) {
                            let t = Math.abs(o.x - e.x);
                            t < a && (a = t, n = e)
                        }
                        n ? (n.x = (n.x * n.count + o.x) / ++n.count, n.blocks.push(t)) : r.push(new i(o.x, 1, [t]))
                    }
                }
                r.sort((e, t) => e.x - t.x);
                for (const e of r)
                    e.blocks.sort((e, t) => e.getRelativeToSurfaceXY().y - t.getRelativeToSurfaceXY().y);
                return {
                    cols: r,
                    orphans: s,
                    maxWidths: n
                }
            }
            getVariableUsesById(e)
            {
                let t = [],
                    o = this.getTopBlocks(!0);
                for (const n of o) {
                    let o = n.getDescendants();
                    for (const n of o) {
                        let o = n.getVarModels();
                        if (o)
                            for (const r of o)
                                r.getId() === e && t.push(n)
                    }
                }
                return t
            }
            doReplaceVariable(e, t, o)
            {
                let n = this.getWorkspace(),
                    r = n.getVariable(t, o);
                if (!r)
                    return void alert(this.msg("var-not-exist"));
                let a = r.getId();
                s.startUndoGroup(n);
                let i = this.getVariableUsesById(e);
                for (const e of i)
                    try {
                        "" === o ? e.getField("VARIABLE").setValue(a) : e.getField("LIST").setValue(a)
                    } catch (e) {}
                s.endUndoGroup(n)
            }
            getTopBlockIDs()
            {
                let e = this.getWorkspace().getTopBlocks(),
                    t = new Set;
                for (const o of e)
                    t.add(o.id);
                return t
            }
            beginDragOfNewBlocksNotInIDs(e)
            {
                if (!this.addon.settings.get("enablePasteBlocksAtMouse"))
                    return;
                let t = this.getWorkspace().getTopBlocks();
                for (const o of t)
                    if (!e.has(o.id)) {
                        let e = {
                            x: this.mouseXY.x,
                            y: this.mouseXY.y
                        };
                        o.setIntersects(!0),
                        this.domHelpers.triggerDragAndDrop(o.svgPath_, null, e)
                    }
            }
            updateMousePosition(e)
            {
                this.mouseXY.x = e.clientX,
                this.mouseXY.y = e.clientY
            }
            eventMouseMove(e)
            {
                this.updateMousePosition(e)
            }
            eventKeyDown(e)
            {
                const t = e => {
                    let t = this.costTabBody.querySelector("div[class*='sprite-selector-item_is-selected']"),
                        o = e ? t.parentNode.previousSibling : t.parentNode.nextSibling;
                    if (o) {
                        let e = o.closest("div[class*=gui_flex-wrapper]");
                        o.querySelector("div[class^='sprite-selector-item_sprite-name']").click(),
                        o.scrollIntoView({
                            behavior: "auto",
                            block: "center",
                            inline: "start"
                        }),
                        e.scrollTop = 0
                    }
                };
                if (document.URL.indexOf("editor") <= 0)
                    return;
                let o = e.ctrlKey || e.metaKey;
                if (37 === e.keyCode && o) {
                    if ("INPUT" === document.activeElement.tagName)
                        return;
                    if (this.isCostumeEditor())
                        return t(!0), e.cancelBubble = !0, e.preventDefault(), !0
                }
                if (39 === e.keyCode && o) {
                    if ("INPUT" === document.activeElement.tagName)
                        return;
                    if (this.isCostumeEditor())
                        return t(!1), e.cancelBubble = !0, e.preventDefault(), !0
                }
                if (86 === e.keyCode && o && !e.griff) {
                    let e = this.getTopBlockIDs();
                    setTimeout(() => {
                        this.beginDragOfNewBlocksNotInIDs(e)
                    }, 10)
                }
            }
            eventCopyClick(e, t)
            {
                let o = this.getWorkspace();
                if (e) {
                    e.select();
                    let n = t ? e.getNextBlock() : null;
                    n && n.unplug(!1),
                    document.dispatchEvent(new KeyboardEvent("keydown", {
                        keyCode: 67,
                        ctrlKey: !0
                    })),
                    (n || 2 === t) && setTimeout(() => {
                        n && o.undo(),
                        2 === t && (s.startUndoGroup(o), e.dispose(!0), s.endUndoGroup(o))
                    }, 0)
                }
            }
            eventMouseDown(e)
            {
                this.updateMousePosition(e)
            }
            eventMouseUp(e)
            {
                this.updateMousePosition(e)
            }
            initInner(e)
            {
                let t = e.childNodes;
                this.codeTab && t[0] !== this.codeTab && this.domHelpers.unbindAllEvents(),
                this.codeTab = t[0],
                this.costTab = t[1],
                this.costTabBody = document.querySelector("div[aria-labelledby=" + this.costTab.id + "]"),
                this.domHelpers.bindOnce(document, "keydown", (...e) => this.eventKeyDown(...e), !0),
                this.domHelpers.bindOnce(document, "mousemove", (...e) => this.eventMouseMove(...e), !0),
                this.domHelpers.bindOnce(document, "mousedown", (...e) => this.eventMouseDown(...e), !0),
                this.domHelpers.bindOnce(document, "mouseup", (...e) => this.eventMouseUp(...e), !0)
            }
        }
        class i {
            constructor(e, t, o)
            {
                this.x = e,
                this.count = t,
                this.blocks = o
            }
        }
        const c = {
            "userscript.js": async function({addon: e, console: t, msg: o, safeMsg: n}) {
                new a(e, o, n).init()
            }
        }
    },
    1613: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return i
        }));
        class n {
            constructor(e, t, o, n)
            {
                this.cls = e,
                this.procCode = t,
                this.labelID = o,
                this.y = n,
                this.lower = t.toLowerCase(),
                this.clones = null,
                this.eventName = null
            }
            matchesID(e)
            {
                if (this.labelID === e)
                    return !0;
                if (this.clones)
                    for (const t of this.clones)
                        if (t === e)
                            return !0;
                return !1
            }
        }
        var r = o(1492),
            s = o(1490),
            a = o(1529);
        const i = {
            "userscript.js": async function({addon: e, msg: t, console: o}) {
                const a = await e.tab.traps.getBlockly();
                class i {
                    constructor(e)
                    {
                        this.utils = e,
                        this.el = null,
                        this.items = [],
                        this.selected = null,
                        this.carousel = new c(this.utils)
                    }
                    get workspace()
                    {
                        return a.getMainWorkspace()
                    }
                    createDom()
                    {
                        return this.el = document.createElement("ul"), this.el.className = "sa-find-dropdown", this.el
                    }
                    inputKeyDown(e)
                    {
                        return 38 === e.keyCode ? (this.navigateFilter(-1), void e.preventDefault()) : 40 === e.keyCode ? (this.navigateFilter(1), void e.preventDefault()) : 13 === e.keyCode ? (this.selected && this.navigateFilter(1), void e.preventDefault()) : void this.carousel.inputKeyDown(e)
                    }
                    navigateFilter(e)
                    {
                        let t;
                        for (this.selected && "none" !== this.selected.style.display ? t = -1 === e ? this.selected.previousSibling : this.selected.nextSibling : (t = this.items[0], e = 1); t && "none" === t.style.display;)
                            t = -1 === e ? t.previousSibling : t.nextSibling;
                        t && (t.scrollIntoView({
                            block: "nearest"
                        }), this.onItemClick(t))
                    }
                    addItem(e)
                    {
                        const t = document.createElement("li");
                        t.innerText = e.procCode,
                        t.data = e;
                        const o = {
                            receive: "events",
                            event: "events",
                            define: "more",
                            var: "data",
                            VAR: "data",
                            list: "data-lists",
                            LIST: "data-lists",
                            costume: "looks",
                            sound: "sounds"
                        };
                        if ("flag" === e.cls)
                            t.className = "sa-find-flag";
                        else {
                            const n = o[e.cls];
                            t.className = "sa-block-color sa-block-color-".concat(n)
                        }
                        return t.addEventListener("mousedown", e => (this.onItemClick(t), e.preventDefault(), e.cancelBubble = !0, !1)), this.items.push(t), this.el.appendChild(t), t
                    }
                    onItemClick(t, o)
                    {
                        this.selected && this.selected !== t && (this.selected.classList.remove("sel"), this.selected = null),
                        this.selected !== t && (t.classList.add("sel"), this.selected = t);
                        let n = t.data.cls;
                        if ("costume" === n || "sound" === n) {
                            const o = document.querySelector("[class^=asset-panel_wrapper]");
                            if (o) {
                                o[e.tab.traps.getInternalKey(o)].pendingProps.children[0].props.onItemClick(t.data.y);
                                o.firstChild.firstChild.children[t.data.y].scrollIntoView({
                                    behavior: "auto",
                                    block: "center",
                                    inline: "start"
                                }),
                                o.closest("div[class*=gui_flex-wrapper]").scrollTop = 0
                            }
                        } else if ("var" === n || "VAR" === n || "list" === n || "LIST" === n) {
                            let e = this.getVariableUsesById(t.data.labelID);
                            this.carousel.build(t, e, o)
                        } else if ("define" === n) {
                            let e = this.getCallsToProcedureById(t.data.labelID);
                            this.carousel.build(t, e, o)
                        } else if ("receive" === n) {
                            let e = this.getCallsToEventsByName(t.data.eventName);
                            if (!o) {
                                const t = this.utils.getEditingTarget().id;
                                for (const n of e)
                                    if (n.targetId === t) {
                                        o = n;
                                        break
                                    }
                            }
                            this.carousel.build(t, e, o)
                        } else if (t.data.clones) {
                            let e = [this.workspace.getBlockById(t.data.labelID)];
                            for (const o of t.data.clones)
                                e.push(this.workspace.getBlockById(o));
                            this.carousel.build(t, e, o)
                        } else
                            this.utils.scrollBlockIntoView(t.data.labelID),
                            this.carousel.remove()
                    }
                    getVariableUsesById(e)
                    {
                        let t = [],
                            o = this.workspace.getTopBlocks();
                        for (const n of o) {
                            let o = n.getDescendants();
                            for (const n of o) {
                                let o = n.getVarModels();
                                if (o)
                                    for (const r of o)
                                        r.getId() === e && t.push(n)
                            }
                        }
                        return t
                    }
                    getCallsToProcedureById(e)
                    {
                        let t = this.workspace.getBlockById(e),
                            o = t.getChildren()[0].getProcCode(),
                            n = [t],
                            r = this.workspace.getTopBlocks();
                        for (const e of r) {
                            let t = e.getDescendants();
                            for (const e of t)
                                "procedures_call" === e.type && e.getProcCode() === o && n.push(e)
                        }
                        return n
                    }
                    getCallsToEventsByName(o)
                    {
                        let n = [];
                        const s = e.tab.traps.vm.runtime.targets;
                        for (const e of s) {
                            if (!e.isOriginal)
                                continue;
                            const s = e.blocks;
                            if (s._blocks)
                                for (const a of Object.keys(s._blocks)) {
                                    const i = s._blocks[a];
                                    if ("event_whenbroadcastreceived" === i.opcode && i.fields.BROADCAST_OPTION.value === o)
                                        n.push(new r.a(e, i));
                                    else if ("event_broadcast" === i.opcode || "event_broadcastandwait" === i.opcode) {
                                        const a = i.inputs.BROADCAST_INPUT.block,
                                            c = s._blocks[a];
                                        if (c) {
                                            let s;
                                            s = "event_broadcast_menu" === c.opcode ? c.fields.BROADCAST_OPTION.value : t("complex-broadcast"),
                                            s === o && n.push(new r.a(e, i))
                                        }
                                    }
                                }
                        }
                        return n
                    }
                    empty()
                    {
                        for (const e of this.items)
                            this.el.contains(e) && this.el.removeChild(e);
                        this.items = [],
                        this.selected = null
                    }
                }
                class c {
                    constructor(e)
                    {
                        this.utils = e,
                        this.el = null,
                        this.count = null,
                        this.blocks = [],
                        this.idx = 0
                    }
                    build(e, t, o)
                    {
                        if (this.el && this.el.parentNode === e)
                            this.navRight();
                        else {
                            if (this.remove(), this.blocks = t, e.appendChild(this.createDom()), this.idx = 0, o)
                                for (const e of Object.keys(this.blocks)) {
                                    if (this.blocks[e].id === o.id) {
                                        this.idx = Number(e);
                                        break
                                    }
                                }
                            this.idx < this.blocks.length && this.utils.scrollBlockIntoView(this.blocks[this.idx])
                        }
                    }
                    createDom()
                    {
                        this.el = document.createElement("span"),
                        this.el.className = "sa-find-carousel";
                        const e = this.el.appendChild(document.createElement("span"));
                        e.className = "sa-find-carousel-control",
                        e.textContent = "◀",
                        e.addEventListener("mousedown", e => this.navLeft(e)),
                        this.count = this.el.appendChild(document.createElement("span")),
                        this.count.innerText = this.blocks.length > 0 ? this.idx + 1 + " / " + this.blocks.length : "0";
                        const t = this.el.appendChild(document.createElement("span"));
                        return t.className = "sa-find-carousel-control", t.textContent = "▶", t.addEventListener("mousedown", e => this.navRight(e)), this.el
                    }
                    inputKeyDown(e)
                    {
                        37 === e.keyCode && this.el && this.blocks && this.navLeft(e),
                        39 === e.keyCode && this.el && this.blocks && this.navRight(e)
                    }
                    navLeft(e)
                    {
                        return this.navSideways(e, -1)
                    }
                    navRight(e)
                    {
                        return this.navSideways(e, 1)
                    }
                    navSideways(e, t)
                    {
                        this.blocks.length > 0 && (this.idx = (this.idx + t + this.blocks.length) % this.blocks.length, this.count.innerText = this.idx + 1 + " / " + this.blocks.length, this.utils.scrollBlockIntoView(this.blocks[this.idx])),
                        e && (e.cancelBubble = !0, e.preventDefault())
                    }
                    remove()
                    {
                        this.el && (this.el.remove(), this.blocks = [], this.idx = 0)
                    }
                }
                const l = new class {
                        constructor()
                        {
                            this.utils = new s.a(e),
                            this.prevValue = "",
                            this.findLabel = null,
                            this.findWrapper = null,
                            this.findInput = null,
                            this.dropdownOut = null,
                            this.dropdown = new i(this.utils)
                        }
                        get workspace()
                        {
                            return a.getMainWorkspace()
                        }
                        createDom(o)
                        {
                            const n = o.appendChild(document.createElement("div"));
                            n.className = "sa-find-bar",
                            e.tab.displayNoneWhileDisabled(n, {
                                display: "flex"
                            }),
                            this.findLabel = n.appendChild(document.createElement("label")),
                            this.findLabel.htmlFor = "sa-find-input",
                            this.findLabel.textContent = t("find"),
                            this.findWrapper = n.appendChild(document.createElement("span")),
                            this.findWrapper.className = "sa-find-wrapper",
                            this.dropdownOut = this.findWrapper.appendChild(document.createElement("label")),
                            this.dropdownOut.className = "sa-find-dropdown-out",
                            this.findInput = this.dropdownOut.appendChild(document.createElement("input")),
                            this.findInput.className = e.tab.scratchClass("input_input-form", {
                                others: "sa-find-input"
                            }),
                            this.findInput.type = "search",
                            this.findInput.placeholder = t("find-placeholder"),
                            this.findInput.autocomplete = "off",
                            this.dropdownOut.appendChild(this.dropdown.createDom()),
                            this.bindEvents()
                        }
                        bindEvents()
                        {
                            this.findInput.addEventListener("focus", () => this.inputChange()),
                            this.findInput.addEventListener("keydown", e => this.inputKeyDown(e)),
                            this.findInput.addEventListener("keyup", () => this.inputChange()),
                            this.findInput.addEventListener("focusout", () => this.hideDropDown()),
                            document.addEventListener("keydown", e => this.eventKeyDown(e), !0)
                        }
                        inputChange()
                        {
                            this.showDropDown();
                            let e = (this.findInput.value || "").toLowerCase();
                            if (e === this.prevValue)
                                return;
                            this.prevValue = e,
                            this.dropdown.blocks = null;
                            let t = this.dropdown.items;
                            for (const o of t) {
                                let t = o.data.procCode,
                                    n = o.data.lower.indexOf(e);
                                if (n >= 0) {
                                    for (o.style.display = "block"; o.firstChild;)
                                        o.removeChild(o.firstChild);
                                    n > 0 && o.appendChild(document.createTextNode(t.substring(0, n)));
                                    let r = document.createElement("b");
                                    r.appendChild(document.createTextNode(t.substr(n, e.length))),
                                    o.appendChild(r),
                                    n + e.length < t.length && o.appendChild(document.createTextNode(t.substr(n + e.length)))
                                } else
                                    o.style.display = "none"
                            }
                        }
                        inputKeyDown(e)
                        {
                            if (this.dropdown.inputKeyDown(e), 13 !== e.keyCode)
                                return 27 === e.keyCode ? (this.findInput.value.length > 0 ? (this.findInput.value = "", this.inputChange()) : this.findInput.blur(), void e.preventDefault()) : void 0;
                            this.findInput.blur()
                        }
                        eventKeyDown(t)
                        {
                            if (e.self.disabled)
                                return;
                            let o = t.ctrlKey || t.metaKey;
                            if ("f" === t.key && o && !t.shiftKey)
                                return this.findInput.focus(), this.findInput.select(), t.cancelBubble = !0, t.preventDefault(), !0;
                            if (37 === t.keyCode && o) {
                                if ("INPUT" === document.activeElement.tagName)
                                    return;
                                if (0 === this.selectedTab)
                                    return this.utils.navigationHistory.goBack(), t.cancelBubble = !0, t.preventDefault(), !0
                            }
                            if (39 === t.keyCode && o) {
                                if ("INPUT" === document.activeElement.tagName)
                                    return;
                                if (0 === this.selectedTab)
                                    return this.utils.navigationHistory.goForward(), t.cancelBubble = !0, t.preventDefault(), !0
                            }
                        }
                        showDropDown(e, t)
                        {
                            if (!e && this.dropdownOut.classList.contains("visible"))
                                return;
                            this.prevValue = e ? "" : null,
                            this.dropdownOut.classList.add("visible");
                            let o = 0 === this.selectedTab ? this.getScratchBlocks() : 1 === this.selectedTab ? this.getScratchCostumes() : 2 === this.selectedTab ? this.getScratchSounds() : [];
                            this.dropdown.empty();
                            for (const n of o) {
                                let o = this.dropdown.addItem(n);
                                e && (n.matchesID(e) ? this.dropdown.onItemClick(o, t) : o.style.display = "none")
                            }
                            this.utils.offsetX = this.dropdownOut.getBoundingClientRect().right - this.findLabel.getBoundingClientRect().left + 26,
                            this.utils.offsetY = 32
                        }
                        hideDropDown()
                        {
                            this.dropdownOut.classList.remove("visible")
                        }
                        get selectedTab()
                        {
                            return e.tab.redux.state.scratchGui.editorTab.activeTabIndex
                        }
                        getScratchBlocks()
                        {
                            let e = [],
                                t = {},
                                o = this.workspace.getTopBlocks();
                            function r(o, r, s) {
                                let a = s.id ? s.id : s.getId ? s.getId() : null,
                                    i = t[r];
                                if (i)
                                    return i.clones || (i.clones = []), i.clones.push(a), i;
                                let c = new n(o, r, a, 0);
                                return c.y = s.getRelativeToSurfaceXY ? s.getRelativeToSurfaceXY().y : null, e.push(c), t[r] = c, c
                            }
                            function s(e) {
                                let t,
                                    o = e.inputList[0];
                                for (const e of o.fieldRow)
                                    t = (t ? t + " " : "") + e.getText();
                                return t
                            }
                            for (const e of o)
                                if ("procedures_definition" !== e.type)
                                    if ("event_whenflagclicked" !== e.type)
                                        if ("event_whenbroadcastreceived" !== e.type)
                                            "event_when" !== e.type.substr(0, 10) && "control_start_as_clone" !== e.type || r("event", s(e), e);
                                        else {
                                            let t = e.inputList[0].fieldRow.find(e => "BROADCAST_OPTION" === e.name).getText();
                                            r("receive", "event " + t, e).eventName = t
                                        }
                                    else
                                        r("flag", s(e), e);
                                else {
                                    const t = e.getChildren()[0].getProcCode();
                                    if (!t)
                                        continue;
                                    const o = e.inputList.findIndex(e => e.fieldRow.length > 0);
                                    if (-1 === o)
                                        continue;
                                    const n = e.inputList[o].fieldRow[0].getText();
                                    r("define", 0 === o ? "".concat(n, " ").concat(t) : "".concat(t, " ").concat(n), e)
                                }
                            let a = this.workspace.getVariableMap(),
                                i = a.getVariablesOfType("");
                            for (const e of i)
                                r(e.isLocal ? "var" : "VAR", (e.isLocal ? "var " : "VAR ") + e.name, e);
                            let c = a.getVariablesOfType("list");
                            for (const e of c)
                                r(e.isLocal ? "list" : "LIST", (e.isLocal ? "list " : "LIST ") + e.name, e);
                            const l = this.getCallsToEvents();
                            for (const e of l)
                                r("receive", "event " + e.eventName, e.block).eventName = e.eventName;
                            const d = {
                                flag: 0,
                                receive: 1,
                                event: 2,
                                define: 3,
                                var: 4,
                                VAR: 5,
                                list: 6,
                                LIST: 7
                            };
                            return e.sort((e, t) => {
                                let o = d[e.cls] - d[t.cls];
                                return 0 !== o ? o : e.lower < t.lower ? -1 : e.lower > t.lower ? 1 : e.y - t.y
                            }), e
                        }
                        getScratchCostumes()
                        {
                            let e = this.utils.getEditingTarget().getCostumes(),
                                t = [],
                                o = 0;
                            for (const r of e) {
                                let e = new n("costume", r.name, r.assetId, o);
                                t.push(e),
                                o++
                            }
                            return t
                        }
                        getScratchSounds()
                        {
                            let e = this.utils.getEditingTarget().getSounds(),
                                t = [],
                                o = 0;
                            for (const r of e) {
                                let e = new n("sound", r.name, r.assetId, o);
                                t.push(e),
                                o++
                            }
                            return t
                        }
                        getCallsToEvents()
                        {
                            const e = [],
                                o = new Set;
                            for (const n of this.workspace.getAllBlocks()) {
                                if ("event_broadcast" !== n.type && "event_broadcastandwait" !== n.type)
                                    continue;
                                const r = n.getChildren()[0];
                                if (!r)
                                    continue;
                                let s = "";
                                s = "event_broadcast_menu" === r.type ? r.inputList[0].fieldRow[0].getText() : t("complex-broadcast"),
                                o.has(s) || (o.add(s), e.push({
                                    eventName: s,
                                    block: n
                                }))
                            }
                            return e
                        }
                    }
                    ,
                    d = a.Gesture.prototype.doBlockClick_;
                for (a.Gesture.prototype.doBlockClick_ = function() {
                    if (!e.self.disabled && (1 === this.mostRecentEvent_.button || this.mostRecentEvent_.shiftKey)) {
                        let e = this.startBlock_;
                        for (; e; e = e.getSurroundParent()) {
                            if ("procedures_definition" === e.type || !this.jumpToDef && "procedures_call" === e.type) {
                                let t = e.id ? e.id : e.getId ? e.getId() : null;
                                return l.findInput.focus(), void l.showDropDown(t)
                            }
                            if ("data_variable" === e.type || "data_changevariableby" === e.type || "data_setvariableto" === e.type) {
                                let t = e.getVars()[0];
                                return l.findInput.focus(), l.showDropDown(t, e), void (l.selVarID = t)
                            }
                            if ("event_whenbroadcastreceived" === e.type || "event_broadcastandwait" === e.type || "event_broadcast" === e.type) {
                                let t = e.id;
                                return l.findInput.focus(), l.showDropDown(t, e), void (l.selVarID = t)
                            }
                        }
                    }
                    d.call(this)
                };;) {
                    const t = await e.tab.waitForElement("ul[class*=gui_tab-list_]", {
                        markAsSeen: !0,
                        reduxEvents: ["scratch-gui/mode/SET_PLAYER", "fontsLoaded/SET_FONTS_LOADED", "scratch-gui/locales/SELECT_LOCALE"],
                        reduxCondition: e => !e.scratchGui.mode.isPlayerOnly
                    });
                    l.createDom(t)
                }
            },
            "userstyle.css": o.n(a).a
        }
    },
    1614: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return c
        }));
        var n = o(1487),
            r = o(1488),
            s = o(1489),
            a = async ({addon: e, console: t, msg: o}) => {
                const a = new r.a(250),
                    i = (t, o) => {
                        if (t = Object(n.b)(t), !e.tab.redux.state || !e.tab.redux.state.scratchGui)
                            return;
                        const r = ({detail: t}) => {
                                "scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER" === t.action.type && (e.tab.redux.removeEventListener("statechanged", r), setTimeout(() => {
                                    document.body.classList.remove("sa-hide-eye-dropper-background")
                                }, 50))
                            },
                            s = ({detail: o}) => {
                                "scratch-gui/color-picker/ACTIVATE_COLOR_PICKER" === o.action.type && (e.tab.redux.removeEventListener("statechanged", s), e.tab.redux.addEventListener("statechanged", r), setTimeout(() => {
                                    e.tab.redux.dispatch({
                                        type: "scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",
                                        color: t
                                    })
                                }, 50))
                            };
                        e.tab.redux.addEventListener("statechanged", s),
                        document.body.classList.add("sa-hide-eye-dropper-background"),
                        o.click()
                    },
                    c = () => {
                        const t = document.querySelector("button.scratchEyedropper");
                        a.abort(!1),
                        e.tab.redux.initialize();
                        const r = (e => {
                                const {children: t} = e.parentElement,
                                    o = t[1].getAttribute("aria-valuenow"),
                                    n = t[3].getAttribute("aria-valuenow"),
                                    r = t[5].getAttribute("aria-valuenow"),
                                    a = Number(r) / 255;
                                return Object(s.a)("hsv(".concat(o, ", ").concat(n, ", ").concat(a || 0, ")")).toHexString()
                            })(t),
                            c = Object.assign(document.createElement("div"), {
                                className: "sa-color-picker sa-color-picker-code"
                            });
                        e.tab.displayNoneWhileDisabled(c, {
                            display: "flex"
                        });
                        const l = Object.assign(document.createElement("input"), {
                                className: "sa-color-picker-color sa-color-picker-code-color",
                                type: "color",
                                value: r || "#000000"
                            }),
                            d = Object.assign(document.createElement("input"), {
                                className: e.tab.scratchClass("input_input-form", {
                                    others: "sa-color-picker-text sa-color-picker-code-text"
                                }),
                                type: "text",
                                pattern: "^#?([0-9a-fA-F]{3}){1,2}$",
                                placeholder: o("hex"),
                                value: r || ""
                            });
                        l.addEventListener("input", () => a.limit(() => i(d.value = l.value, t))),
                        d.addEventListener("change", () => {
                            const {value: e} = d;
                            Object(n.a)().test(e) && i(l.value = Object(n.b)(e), t)
                        }),
                        c.appendChild(l),
                        c.appendChild(d),
                        t.parentElement.insertBefore(c, t)
                    },
                    l = await e.tab.traps.getBlockly(),
                    d = l.FieldColourSlider.prototype.showEditor_;
                l.FieldColourSlider.prototype.showEditor_ = function(...e) {
                    const t = d.call(this, ...e);
                    return c(), t
                }
            },
            i = o(1559);
        const c = {
            "userscript.js": async e => {
                a(e)
            },
            "style.css": o.n(i).a
        }
    },
    1616: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return i
        }));
        function n(e, t) {
            var o = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var n = Object.getOwnPropertySymbols(e);
                t && (n = n.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))),
                o.push.apply(o, n)
            }
            return o
        }
        function r(e) {
            for (var t = 1; t < arguments.length; t++) {
                var o = null != arguments[t] ? arguments[t] : {};
                t % 2 ? n(Object(o), !0).forEach((function(t) {
                    s(e, t, o[t])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(o)) : n(Object(o)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(o, t))
                }))
            }
            return e
        }
        function s(e, t, o) {
            return t in e ? Object.defineProperty(e, t, {
                value: o,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = o, e
        }
        var a = o(1582);
        const i = {
            "userscript.js": async function({addon: e, console: t, msg: o}) {
                let n,
                    s,
                    a,
                    i,
                    c,
                    l;
                const d = e => {
                        const t = e.indexOf("//");
                        return -1 === t || 0 === t ? null : e.substr(0, t)
                    },
                    u = e => {
                        const t = e.indexOf("//");
                        return -1 === t || 0 === t ? e : e.substr(t + "//".length)
                    },
                    p = (e, t) => {
                        const o = u(e);
                        return t ? "".concat(t).concat("//").concat(o) : o
                    },
                    h = e => !e.includes("//") && !e.endsWith("/"),
                    f = ["_mouse_", "_stage_", "_edge_", "_myself_", "_random_"],
                    m = e => "" === e ? "2" : f.includes(e) ? "".concat(e, "2") : e,
                    g = e => {
                        const t = e.closest("[class*='sprite-selector_sprite-selector']");
                        if (t)
                            return t[s].child.sibling.child.stateNode;
                        const o = e.closest('[class*="asset-panel_wrapper"]');
                        if (o)
                            return o[s].child.child.stateNode;
                        throw new Error("cannot find SortableHOC")
                    },
                    b = (e, t, o) => Math.min(Math.max(e, t), o),
                    y = e => e && e.name && "object" == typeof e.name ? e.name : null,
                    v = {
                        assetId: "&__sa_folders_folder",
                        encodeDataURI: () => (e => {
                            if ("/folder.svg" === e)
                                return "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMCA0SDRjLTEuMSAwLTEuOTkuOS0xLjk5IDJMMiAxOGMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJoLThsLTItMnoiLz48L3N2Zz4=";
                            throw new Error("Unknown asset: ".concat(e))
                        })("/folder.svg")
                    },
                    k = "data:image/svg+xml;base64,".concat(btoa('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100px" height="100px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Sound" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.4785058,12.6666667 C12.3144947,12.6666667 12.1458852,12.6272044 11.9926038,12.5440517 C11.537358,12.2960031 11.3856094,11.7562156 11.6553847,11.3376335 C12.1688774,10.5371131 12.1688774,9.54491867 11.6553847,8.74580756 C11.3856094,8.32581618 11.537358,7.78602861 11.9926038,7.53798001 C12.452448,7.29275014 13.0379829,7.43086811 13.3046926,7.84804076 C14.1737981,9.20103311 14.1737981,10.8809986 13.3046926,12.233991 C13.1268862,12.5130457 12.806528,12.6666667 12.4785058,12.6666667 Z M15.3806784,13.8333333 C15.2408902,13.8333333 15.0958763,13.796281 14.9665396,13.7182064 C14.5785295,13.485306 14.4491928,12.9784829 14.6791247,12.5854634 C15.5949331,11.0160321 15.5949331,9.065491 14.6791247,7.49738299 C14.4491928,7.10436352 14.5785295,6.59621712 14.9665396,6.36331669 C15.3558562,6.13438616 15.8549129,6.26274605 16.0848448,6.65444223 C17.3050517,8.74260632 17.3050517,11.3389168 16.0848448,13.4270809 C15.9319924,13.6890939 15.6602547,13.8333333 15.3806784,13.8333333 Z M10.3043478,5.62501557 L10.3043478,13.873675 C10.3043478,14.850934 9.10969849,15.3625101 8.36478311,14.7038052 L6.7566013,13.2797607 C6.18712394,12.7762834 5.44499329,12.4968737 4.67362297,12.4968737 L4.3923652,12.4968737 C3.62377961,12.4968737 3,11.8935108 3,11.1470686 L3,8.36646989 C3,7.62137743 3.62377961,7.01666471 4.3923652,7.01666471 L4.65830695,7.01666471 C5.42967727,7.01666471 6.17180792,6.73725504 6.74128529,6.23377771 L8.36478311,4.79623519 C9.10969849,4.13753026 10.3043478,4.64910643 10.3043478,5.62501557 Z" id="Combined-Shape" fill="#575E75"></path>\n    </g>\n</svg>'));
                let w = null;
                const x = Object.create(null),
                    _ = e => {
                        const t = e => {
                            const t = (e => {
                                    let t = 0;
                                    for (let o = 0; o < e.length; o++)
                                        t = 31 * t + e.charCodeAt(o),
                                        t |= 0;
                                    return t
                                })(e),
                                o = (n = t, function() {
                                    var e = n += 1831565813;
                                    return e = Math.imul(e ^ e >>> 15, 1 | e), (((e ^= e + Math.imul(e ^ e >>> 7, 61 | e)) ^ e >>> 14) >>> 0) / 4294967296
                                });
                            var n;
                            return o(), o(), o(), o(), o()
                        };
                        if (!x[e]) {
                            w || (w = document.createElement("style"), document.head.appendChild(w));
                            const o = 360 * t(e),
                                n = "hsla(".concat(o, "deg, 100%, 85%, 0.5)"),
                                r = Object.keys(x).length,
                                s = "sa-folders-color-".concat(r);
                            x[e] = s,
                            w.textContent += ".".concat(s, "{background-color:").concat(n, " !important;}"),
                            w.textContent += ".".concat(s, '[class*="sprite-selector_raised"]:not([class*="sa-folders-folder"]){background-color:hsla(').concat(o, "deg, 100%, 77%, 1) !important;}")
                        }
                        return x[e]
                    },
                    T = e => {
                        const t = Object.create(null),
                            o = [];
                        for (const n of e) {
                            const e = n.getName ? n.getName() : n.name,
                                r = d(e);
                            "string" == typeof r ? (t[r] || (t[r] = [], o.push(t[r])), t[r].push(n)) : o.push(n)
                        }
                        const n = o.flat();
                        for (let t = 0; t < e.length; t++)
                            if (o[t] !== e[t])
                                return {
                                    items: n,
                                    changed: !0
                                };
                        return {
                            items: n,
                            changed: !1
                        }
                    },
                    I = () => {
                        const {items: e, changed: t} = T(n.runtime.targets);
                        t && (n.runtime.targets = e, n.emitTargetsUpdate())
                    },
                    C = (e=n.editingTarget) => {
                        const {items: t, changed: o} = T(e.sprite.costumes);
                        o && (e.sprite.costumes = t, n.emitTargetsUpdate())
                    },
                    L = (e=n.editingTarget) => {
                        const {items: t, changed: o} = T(e.sprite.sounds);
                        o && (e.sprite.sounds = t, n.emitTargetsUpdate())
                    },
                    E = e => {
                        const t = e.constructor;
                        if (!Array.isArray(e.props.items) || "string" != typeof e.props.selectedId && "number" != typeof e.props.selectedItemIndex || void 0 === e.containerBox || void 0 !== t.prototype.componentDidMount || void 0 !== t.prototype.componentDidUpdate || "function" != typeof t.prototype.handleAddSortable || "function" != typeof t.prototype.handleRemoveSortable || "function" != typeof t.prototype.setRef)
                            throw new Error("Can not comprehend SortableHOC")
                    };
                class N {
                    constructor()
                    {
                        this.cache = new Map,
                        this.usedThisTick = new Set
                    }
                    has(e)
                    {
                        return this.cache.has(e)
                    }
                    get(e)
                    {
                        return this.usedThisTick.add(e), this.cache.get(e)
                    }
                    set(e, t)
                    {
                        this.usedThisTick.add(e),
                        this.cache.set(e, t)
                    }
                    startTick()
                    {
                        this.usedThisTick.clear()
                    }
                    endTick()
                    {
                        for (const e of Array.from(this.cache.keys()))
                            this.usedThisTick.has(e) || this.cache.delete(e)
                    }
                    clear()
                    {
                        this.usedThisTick.clear(),
                        this.cache.clear()
                    }
                }
                const S = (e, t) => {
                        const o = new N,
                            n = new N,
                            s = new N,
                            u = [[0, 0], [40, 0], [0, 40], [40, 40]],
                            p = e => {
                                let t = 'data:image/svg+xml;,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(80, '" height="').concat(80, '">');
                                for (let o = 0; o < Math.min(u.length, e.length); o++) {
                                    const n = e[o],
                                        r = 40,
                                        s = 40,
                                        [a, i] = u[o];
                                    let c;
                                    n.asset ? c = n.asset.encodeDataURI() : n.costume && n.costume.asset ? c = n.costume.asset.encodeDataURI() : n.url && (c = k),
                                    c && (t += '<image width="'.concat(r, '" height="').concat(s, '" x="').concat(a, '" y="').concat(i, '" href="').concat(c, '"/>'))
                                }
                                return t += "</svg>", t
                            },
                            h = e => {
                                let t = "sa_folder&&";
                                for (let o = 0; o < Math.min(u.length, e.length); o++) {
                                    const n = e[o];
                                    n.asset ? t += n.asset.assetId : n.costume && n.costume.asset ? t += n.costume.asset.assetId : n.url && (t += n.url),
                                    t += "&&"
                                }
                                return t
                            },
                            f = e => {
                                if (1 === t) {
                                    return e.props.items.find(t => t.id === e.props.selectedId)
                                }
                                if (2 === t) {
                                    return e.props.items[e.props.selectedItemIndex]
                                }
                                return null
                            };
                        e.prototype.saInitialSetup = function() {
                            o.clear(),
                            n.clear(),
                            s.clear();
                            const e = [],
                                r = f(this);
                            if (r && !r.isStage) {
                                const o = d(r.name);
                                e.push(o),
                                1 === t ? a = o : 2 === t && (i = o)
                            }
                            this.setState({
                                folders: e
                            })
                        },
                        e.prototype.componentDidMount = function() {
                            const e = f(this);
                            if (e) {
                                const o = d(e.name);
                                1 === t ? a = o : 2 === t && (i = o)
                            }
                            this.saInitialSetup()
                        },
                        e.prototype.componentDidUpdate = function(e, o) {
                            const n = f(this);
                            if (n) {
                                const o = d(n.name),
                                    r = this.state.folders.includes(o) ? o : null;
                                let s;
                                1 === t ? a = r : 2 === t && (i = r),
                                s = this.props.selectedId ? this.props.selectedId !== e.selectedId : this.props.items[this.props.selectedItemIndex] && e.items[e.selectedItemIndex] && this.props.items[this.props.selectedItemIndex].name !== e.items[e.selectedItemIndex].name,
                                s && (n.isStage || "string" != typeof o || this.state.folders.includes(o) || this.setState(e => ({
                                    folders: [...e.folders, o]
                                })))
                            }
                        };
                        const m = e.prototype.render;
                        e.prototype.render = function() {
                            const e = this.props;
                            this.props = r(r({}, this.props), ((e, r) => {
                                const a = e => {
                                    const t = e.name;
                                    let n,
                                        r;
                                    o.has(t) ? (n = o.get(t), r = n.name) : (r = {
                                        toString: () => "_".concat(e.name)
                                    }, n = {}, o.set(t, n));
                                    const s = d(e.name);
                                    return Object.assign(n, e), r.realName = e.name, r.realIndex = u, r.inFolder = s, n.name = r, {
                                        newItem: n,
                                        itemData: r
                                    }
                                };
                                o.startTick(),
                                n.startTick(),
                                s.startTick();
                                const i = new Map,
                                    c = [],
                                    l = {
                                        items: c
                                    };
                                let u = 0;
                                for (; u < r.items.length;) {
                                    const o = r.items[u],
                                        f = d(o.name);
                                    if (null === f) {
                                        if (c.push(a(o).newItem), 2 === t) {
                                            r.selectedItemIndex === u && (l.selectedItemIndex = c.length - 1)
                                        }
                                    } else {
                                        const o = -1 !== e.indexOf(f),
                                            m = [];
                                        for (; u < r.items.length;) {
                                            const e = r.items[u],
                                                n = a(e);
                                            if (d(e.name) !== f)
                                                break;
                                            if (m.push(n.newItem), 2 === t) {
                                                r.selectedItemIndex === u && (l.selectedItemIndex = o ? c.length + m.length : -1)
                                            }
                                            u++
                                        }
                                        u--;
                                        const g = i.get(f) || 0;
                                        i.set(f, g + 1);
                                        const b = h(m),
                                            y = "".concat(o, "&").concat(g, "&").concat(f, "&").concat(b, "&"),
                                            k = "&__".concat(g, "_").concat(f),
                                            w = b;
                                        let x,
                                            _,
                                            T;
                                        if (n.has(y) ? (x = n.get(y), _ = x.name) : (x = {
                                            id: {
                                                toString: () => k
                                            }
                                        }, _ = {
                                            toString: () => k
                                        }, n.set(y, x)), _.folder = f, _.folderOpen = o, x.items = m, x.name = _, o ? T = v : s.has(w) ? T = s.get(w) : (T = {
                                            assetId: w,
                                            encodeDataURI: () => p(m)
                                        }, s.set(w, T)), 1 === t ? (x.costume || (x.costume = {}), x.costume.asset = T, x.id || (x.id = {}), x.id.sa_folder_items = m, x.id.toString = () => k) : (x.asset = T, x.dragPayload || (x.dragPayload = {}), x.dragPayload.sa_folder_items = m), c.push(x), o)
                                            for (const e of m)
                                                c.push(e)
                                    }
                                    u++
                                }
                                return o.endTick(), n.endTick(), s.endTick(), l
                            })(this.state && this.state.folders || [], this.props)),
                            1 === t ? c = this.props.items : 2 === t && (l = this.props.items);
                            const a = m.call(this);
                            return this.props = e, a
                        }
                    },
                    D = (e, t) => {
                        const o = g(e.ref);
                        return (o.state && o.state.folders || []).includes(t)
                    },
                    M = (e, t, o) => {
                        g(e.ref).setState(e => {
                            let n = e && e.folders || [];
                            return n = n.filter(e => e !== t), o ? {
                                folders: [...n, t]
                            } : {
                                folders: n
                            }
                        })
                    };
                e.tab.createEditorContextMenu((t, r) => {
                    if ("sprite" !== t && "costume" !== t && "sound" !== t)
                        return;
                    const s = r.target[e.tab.traps.getInternalKey(r.target)].return.return.return.stateNode,
                        a = y(s.props);
                    if (a) {
                        if ("string" == typeof a.folder) {
                            r.target.setAttribute("sa-folders-context-type", "folder");
                            const t = e => {
                                    const t = D(s, a.folder);
                                    if (M(s, a.folder, !1), t && "string" == typeof e && M(s, e, !0), "SPRITE" === s.props.dragType) {
                                        for (const t of n.runtime.targets)
                                            t.isOriginal && d(t.getName()) === a.folder && n.renameSprite(t.id, m(p(t.getName(), e)));
                                        n.emitWorkspaceUpdate(),
                                        I()
                                    } else if ("COSTUME" === s.props.dragType) {
                                        for (let t = 0; t < n.editingTarget.sprite.costumes.length; t++) {
                                            const o = n.editingTarget.sprite.costumes[t];
                                            d(o.name) === a.folder && n.renameCostume(t, p(o.name, e))
                                        }
                                        C()
                                    } else if ("SOUND" === s.props.dragType) {
                                        for (let t = 0; t < n.editingTarget.sprite.sounds.length; t++) {
                                            const o = n.editingTarget.sprite.sounds[t];
                                            d(o.name) === a.folder && n.renameSound(t, p(o.name, e))
                                        }
                                        L()
                                    }
                                },
                                i = async () => {
                                    let n = await e.tab.prompt(o("rename-folder-prompt-title"), o("rename-folder-prompt"), a.folder, {
                                        useEditorClasses: !0
                                    });
                                    null !== n && (h(n) ? (n || (n = null), t(n)) : alert(o("name-not-allowed")))
                                },
                                c = () => {
                                    t(null)
                                };
                            return [{
                                className: "sa-folders-rename-folder",
                                label: o("rename-folder"),
                                callback: i,
                                position: "assetContextMenuAfterDelete",
                                order: 10
                            }, {
                                className: "sa-folders-remove-folder",
                                label: o("remove-folder"),
                                callback: c,
                                position: "assetContextMenuAfterDelete",
                                order: 11
                            }]
                        }
                        {
                            r.target.setAttribute("sa-folders-context-type", "asset");
                            const t = e => {
                                    if ("SPRITE" === s.props.dragType) {
                                        const t = n.runtime.getTargetById(s.props.id);
                                        n.renameSprite(s.props.id, m(p(t.getName(), e))),
                                        I(),
                                        n.emitWorkspaceUpdate()
                                    } else if ("COSTUME" === s.props.dragType) {
                                        const t = y(s.props).realIndex,
                                            o = n.editingTarget.sprite.costumes[t];
                                        n.renameCostume(n.editingTarget.sprite.costumes.indexOf(o), p(o.name, e)),
                                        C()
                                    } else if ("SOUND" === s.props.dragType) {
                                        const t = y(s.props).realIndex,
                                            o = n.editingTarget.sprite.sounds[t];
                                        n.renameSound(n.editingTarget.sprite.sounds.indexOf(o), p(o.name, e)),
                                        L()
                                    }
                                },
                                i = async () => {
                                    const n = await e.tab.prompt(o("name-prompt-title"), o("name-prompt"), u(a.realName), {
                                        useEditorClasses: !0
                                    });
                                    null !== n && (h(n) ? t(n) : alert(o("name-not-allowed")))
                                },
                                d = [{
                                    border: !0,
                                    className: "sa-folders-create-folder",
                                    label: o("create-folder"),
                                    callback: i,
                                    position: "assetContextMenuAfterDelete",
                                    order: 13
                                }],
                                f = a.inFolder;
                            return "string" == typeof f && d.push({
                                className: "sa-folders-remove-from-folder",
                                label: o("remove-from-folder"),
                                callback: () => t(null),
                                position: "assetContextMenuAfterDelete",
                                order: 14
                            }), d.concat((e => {
                                const t = new Set;
                                let o;
                                o = "SPRITE" === e.props.dragType ? c : l;
                                for (const e of o) {
                                    const o = y(e);
                                    "string" == typeof o.folder && t.add(o.folder)
                                }
                                return Array.from(t)
                            })(s).filter(e => e !== f).map((e, n) => ({
                                className: "sa-folders-add-to-folder",
                                label: o("add-to-folder", {
                                    folder: e
                                }),
                                callback: () => t(e),
                                position: "assetContextMenuAfterDelete",
                                order: 20 + n
                            })))
                        }
                    }
                });
                const A = t => {
                        for (const e of ["handleDelete", "handleDuplicate", "handleExport"]) {
                            const o = t.prototype[e];
                            t.prototype[e] = function(...e) {
                                if ("number" == typeof this.props.id) {
                                    const t = y(this.props);
                                    if (t) {
                                        const n = this.props;
                                        this.props = r(r({}, n), {}, {
                                            id: t.realIndex
                                        });
                                        const s = o.call(this, ...e);
                                        return this.props = n, s
                                    }
                                }
                                return o.call(this, ...e)
                            }
                        }
                        const n = t.prototype.handleDragEnd;
                        t.prototype.handleDragEnd = function(...t) {
                            const o = y(this.props);
                            if (o && "number" == typeof o.realIndex && this.props.dragging) {
                                const t = this.props.index,
                                    n = o.realIndex;
                                if (t !== n) {
                                    const o = e.tab.redux.state.scratchGui.assetDrag.currentOffset,
                                        r = g(this.ref);
                                    o && r && null === r.getMouseOverIndex() && (this.props.index = n, this.handleDrag(o), this.props.index = t)
                                }
                            }
                            return n.call(this, ...t)
                        };
                        const s = t.prototype.handleClick;
                        t.prototype.handleClick = function(...e) {
                            const t = e[0];
                            if (t && !this.noClick) {
                                const e = y(this.props);
                                if (e) {
                                    if ("string" == typeof e.folder)
                                        return t.preventDefault(), void M(this, e.folder, !D(this, e.folder));
                                    if ("number" == typeof this.props.number && "number" == typeof e.realIndex)
                                        return t.preventDefault(), void (this.props.onClick && this.props.onClick(e.realIndex))
                                }
                            }
                            return s.call(this, ...e)
                        };
                        const a = t.prototype.render;
                        t.prototype.render = function() {
                            const e = y(this.props);
                            if (e) {
                                const t = this.props;
                                this.props = r({}, this.props),
                                "string" == typeof e.realName && (this.props.name = u(e.realName)),
                                "number" == typeof this.props.number && "number" == typeof e.realIndex && (this.props.number = e.realIndex + 1),
                                "string" == typeof e.folder && (this.props.name = e.folder, e.folderOpen ? this.props.details = o("open-folder") : this.props.details = o("closed-folder"), this.props.selected = !1, this.props.number = null, this.props.className += " ".concat(_(e.folder), " sa-folders-folder")),
                                "string" == typeof e.inFolder && (this.props.className += " ".concat(_(e.inFolder)));
                                const n = a.call(this);
                                return this.props = t, n
                            }
                            return a.call(this)
                        }
                    },
                    O = () => {
                        const e = n.runtime.targets[0].constructor,
                            o = n.installTargets;
                        n.installTargets = function(...e) {
                            if (null !== a) {
                                const t = e[0],
                                    o = e[2];
                                if (Array.isArray(t) && !o)
                                    for (const e of t)
                                        e.sprite && (e.sprite.name = p(e.sprite.name, a))
                            }
                            return o.call(this, ...e).then(e => (I(), e))
                        };
                        const r = e.prototype.addCostume;
                        e.prototype.addCostume = function(...e) {
                            if (null !== i) {
                                const t = e[0];
                                t && "string" != typeof d(t.name) && (t.name = p(t.name, i))
                            }
                            const t = r.call(this, ...e);
                            return C(this), t
                        };
                        const s = e.prototype.addSound;
                        e.prototype.addSound = function(...e) {
                            if (null !== i) {
                                const t = e[0];
                                t && "string" != typeof d(t.name) && (t.name = p(t.name, i))
                            }
                            const t = s.call(this, ...e);
                            return L(this), t
                        };
                        const u = ({guiItems: e, getAll: o, set: n, rename: r, getVMItemFromGUIItem: s, zeroIndexed: a, onFolderChanged: i}, c, l) => {
                            if ((c = b(c, a ? 0 : 1, a ? e.length - 1 : e.length)) === (l = b(l, a ? 0 : 1, a ? e.length - 1 : e.length)))
                                return !1;
                            let d = o();
                            const u = o(),
                                h = e[c - (a ? 0 : 1)],
                                f = e[l - (a ? 0 : 1)],
                                m = y(h),
                                g = y(f);
                            if (!m || !g)
                                return t.warn("should never happen"), !1;
                            const v = ("string" == typeof m.folder ? h.items : [h]).map(e => s(e, d)).filter(e => e);
                            if ("number" == typeof g.realIndex) {
                                const e = s(f, d);
                                if (!e || v.includes(e))
                                    return !1
                            }
                            let k,
                                w = null;
                            if (d = d.filter(e => !v.includes(e)), l === (a ? 0 : 1))
                                k = a ? 0 : 1;
                            else if (l === e.length - (a ? 1 : 0))
                                k = d.length;
                            else if ("number" == typeof g.realIndex) {
                                w = "string" == typeof g.inFolder ? g.inFolder : null;
                                let e = s(f, d);
                                if (!e)
                                    return t.warn("should never happen"), !1;
                                k = d.indexOf(e),
                                l > c && k++
                            } else {
                                if ("string" != typeof g.folder)
                                    return t.warn("should never happen"), !1;
                                {
                                    let e,
                                        o = 0;
                                    l < c ? e = f.items[0] : g.folderOpen ? (e = f.items[0], w = g.folder) : (e = f.items[f.items.length - 1], o = 1);
                                    let n = s(e, d);
                                    if (n)
                                        k = d.indexOf(n) + o;
                                    else {
                                        if (n = s(e, u), !n)
                                            return t.warn("should never happen"), !1;
                                        k = u.indexOf(n) + o
                                    }
                                }
                            }
                            if ("string" != typeof m.folder || null === w) {
                                if (k < (a ? 0 : 1) || k > d.length)
                                    return t.warn("should never happen"), !1;
                                if (d.splice(k, 0, ...v), n(d), "string" != typeof m.folder && m.inFolder !== w) {
                                    for (const e of v) {
                                        const t = e.getName ? e.getName() : e.name;
                                        r(e, p(t, w))
                                    }
                                    i && i()
                                }
                                return !0
                            }
                        };
                        n.constructor.prototype.reorderTarget = function(e, t) {
                            return u({
                                getAll: () => this.runtime.targets,
                                set: e => {
                                    this.runtime.targets = e,
                                    this.emitTargetsUpdate()
                                },
                                rename: (e, t) => {
                                    this.renameSprite(e.id, m(t))
                                },
                                getVMItemFromGUIItem: (e, t) => t.find(t => t.id === e.id),
                                onFolderChanged: () => {
                                    this.emitWorkspaceUpdate()
                                },
                                guiItems: c,
                                zeroIndexed: !1
                            }, e, t)
                        },
                        e.prototype.reorderCostume = function(e, t) {
                            return u({
                                getAll: () => this.sprite.costumes,
                                set: e => {
                                    this.sprite.costumes = e
                                },
                                rename: (e, t) => {
                                    this.renameCostume(this.sprite.costumes.indexOf(e), t)
                                },
                                getVMItemFromGUIItem: (e, t) => {
                                    const o = y(e);
                                    return t.find(e => e.name === o.realName)
                                },
                                guiItems: l,
                                zeroIndexed: !0
                            }, e, t)
                        },
                        e.prototype.reorderSound = function(e, t) {
                            return u({
                                getAll: () => this.sprite.sounds,
                                set: e => {
                                    this.sprite.sounds = e
                                },
                                rename: (e, t) => {
                                    this.renameSound(this.sprite.sounds.indexOf(e), t)
                                },
                                getVMItemFromGUIItem: (e, t) => {
                                    const o = y(e);
                                    return t.find(e => e.name === o.realName)
                                },
                                guiItems: l,
                                zeroIndexed: !0
                            }, e, t)
                        }
                    },
                    j = t => {
                        const n = t.constructor;
                        n.prototype.sa_loadNextItem = function() {
                            if (!this.sa_queuedItems)
                                return;
                            const e = this.sa_queuedItems.pop();
                            if (e) {
                                let t,
                                    o;
                                e.dragPayload ? (o = e.url ? "SOUND" : "COSTUME", t = e.dragPayload) : e.id && (o = "SPRITE", t = e.id),
                                o && t && r.call(this, {
                                    dragType: o,
                                    payload: t
                                })
                            }
                        },
                        n.prototype.componentDidUpdate = function(e, t) {
                            this.state.loading || !t.loading || this.state.error || this.sa_loadNextItem()
                        };
                        const r = n.prototype.handleDrop;
                        n.prototype.handleDrop = function(...t) {
                            const n = t[0],
                                s = n && n.payload && n.payload.sa_folder_items;
                            if (!Array.isArray(s))
                                return r.call(this, ...t);
                            e.tab.confirm("", o("confirm-backpack-folder"), {
                                useEditorClasses: !0
                            }).then(e => {
                                e && (this.sa_queuedItems = s, this.sa_loadNextItem())
                            })
                        },
                        t.handleDrop = n.prototype.handleDrop.bind(t)
                    };
                {
                    const e = t => {
                        t.target.closest('[class*="backpack_backpack-header_"]') && setTimeout(() => {
                            const t = document.querySelector("[class^='backpack_backpack-list_']");
                            if (!t)
                                return;
                            document.removeEventListener("click", e);
                            const o = (e => {
                                const t = e.closest('[class*="gui_editor-wrapper"]');
                                if (!t)
                                    throw new Error("cannot find Backpack");
                                return t[s].child.sibling.child.child.stateNode
                            })(t);
                            (e => {
                                const t = e.constructor;
                                if ("function" != typeof t.prototype.handleDrop || void 0 !== t.prototype.componentDidUpdate)
                                    throw new Error("Can not comprehend Backpack")
                            })(o),
                            j(o)
                        })
                    };
                    document.addEventListener("click", e, !0)
                }
                {
                    const t = await e.tab.waitForElement("[class^='sprite-selector_sprite-wrapper']", {
                        reduxCondition: e => !e.scratchGui.mode.isPlayerOnly
                    });
                    n = e.tab.traps.vm,
                    s = Object.keys(t).find(e => e.startsWith("__reactInternalInstance$"));
                    const o = g(t),
                        r = t[s].child.child.child.stateNode;
                    E(o),
                    (e => {
                        const t = e.constructor;
                        if ("object" != typeof e.props.asset || "string" != typeof e.props.name || "string" != typeof e.props.dragType || "function" != typeof t.prototype.handleClick || "function" != typeof t.prototype.setRef || "function" != typeof t.prototype.handleDrag || "function" != typeof t.prototype.handleDragEnd || "function" != typeof t.prototype.handleDelete || "function" != typeof t.prototype.handleDuplicate || "function" != typeof t.prototype.handleExport)
                            throw new Error("Can not comprehend SpriteSelectorItem")
                    })(r),
                    (e => {
                        const t = e.runtime.targets[0];
                        if ("function" != typeof e.installTargets || "function" != typeof e.reorderTarget || "function" != typeof t.reorderCostume || "function" != typeof t.reorderSound || "function" != typeof t.addCostume || "function" != typeof t.addSound)
                            throw new Error("Can not comprehend VM")
                    })(n),
                    S(o.constructor, 1),
                    A(r.constructor),
                    o.saInitialSetup(),
                    O()
                }
                {
                    const t = await e.tab.waitForElement("[class*='selector_list-item']", {
                            reduxCondition: e => 0 !== e.scratchGui.editorTab.activeTabIndex && !e.scratchGui.mode.isPlayerOnly
                        }),
                        o = g(t);
                    E(o),
                    S(o.constructor, 2),
                    o.saInitialSetup()
                }
            },
            "style.css": o.n(a).a
        }
    },
    1617: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return d
        }));
        /**
         * This file is imported from https://github.com/LLK/scratch-blocks/
         * It has been cleaned up and unnecessary functions have been removed.
         * Original license is below.
         *
         * @license
         * Visual Blocks Editor
         *
         * Copyright 2012 Google Inc.
         * https://developers.google.com/blockly/
         *
         * Licensed under the Apache License, Version 2.0 (the "License");
         * you may not use this file except in compliance with the License.
         * You may obtain a copy of the License at
         *
         *   http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing, software
         * distributed under the License is distributed on an "AS IS" BASIS,
         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         * See the License for the specific language governing permissions and
         * limitations under the License.
         */
        const n = function(e, t, o) {
                const n = document.createElement(e);
                if (void 0 !== o) {
                    Array.isArray(o) || (o = [o]);
                    for (const e of o)
                        "string" == typeof e ? n.appendChild(document.createTextNode(e)) : n.appendChild(e)
                }
                return n
            },
            r = e => {
                e.parentNode && e.parentNode.removeChild(e)
            },
            s = function(e) {
                if (e.name && e.SERIALIZABLE) {
                    if (e.referencesVariables())
                        return function(e) {
                            null == e.getValue() && e.initModel();
                            var t = e.getVariable();
                            if (!t)
                                throw Error("Tried to serialize a variable field with no variable.");
                            var o = n("field", 0, t.name);
                            return o.setAttribute("name", e.name), o.setAttribute("id", t.getId()), o.setAttribute("variabletype", t.type), o
                        }(e);
                    var t = n("field", 0, e.getValue());
                    return t.setAttribute("name", e.name), t
                }
                return null
            },
            a = function e(t, o) {
                var r = n(t.isShadow() ? "shadow" : "block");
                if (r.setAttribute("type", t.type), o || r.setAttribute("id", t.id), t.mutationToDom) {
                    var a = t.mutationToDom();
                    a && (a.hasChildNodes() || a.hasAttributes()) && r.appendChild(a)
                }
                if (function(e, t) {
                    for (var o, n = 0; o = e.inputList[n]; n++)
                        for (var r, a = 0; r = o.fieldRow[a]; a++) {
                            var i = s(r);
                            i && t.appendChild(i)
                        }
                }(t, r), i(t, r), t.data) {
                    var l = n("data", 0, t.data);
                    r.appendChild(l)
                }
                for (var d, u = 0; d = t.inputList[u]; u++) {
                    var p = !0;
                    if (5 != d.type) {
                        var h = d.connection.targetBlock();
                        if (1 == d.type ? b = n("value") : 3 == d.type && (b = n("statement")), (m = d.connection.getShadowDom()) && (!h || !h.isShadow())) {
                            var f = c(m);
                            o && f.getAttribute("id") && f.removeAttribute("id"),
                            b.appendChild(f)
                        }
                        h && (b.appendChild(e(h, o)), p = !1),
                        b.setAttribute("name", d.name),
                        p || r.appendChild(b)
                    }
                }
                t.inputsInlineDefault != t.inputsInline && r.setAttribute("inline", t.inputsInline),
                t.isCollapsed() && r.setAttribute("collapsed", !0),
                t.disabled && r.setAttribute("disabled", !0),
                t.isDeletable() || t.isShadow() || r.setAttribute("deletable", !1),
                t.isMovable() || t.isShadow() || r.setAttribute("movable", !1),
                t.isEditable() || r.setAttribute("editable", !1);
                var m,
                    g = t.getNextBlock();
                if (g) {
                    var b = n("next", 0, e(g, o));
                    r.appendChild(b)
                }
                return !(m = t.nextConnection && t.nextConnection.getShadowDom()) || g && g.isShadow() || b.appendChild(c(m)), r
            },
            i = function(e, t) {
                var o = e.getCommentText();
                if (o) {
                    var r = n("comment", 0, o);
                    if ("object" == typeof e.comment) {
                        var s;
                        r.setAttribute("id", e.comment.id),
                        r.setAttribute("pinned", e.comment.isVisible()),
                        s = e.comment.getHeightWidth ? e.comment.getHeightWidth() : e.comment.getBubbleSize(),
                        r.setAttribute("h", s.height),
                        r.setAttribute("w", s.width);
                        var a = e.comment.getXY();
                        r.setAttribute("x", a.x),
                        r.setAttribute("y", a.y),
                        r.setAttribute("minimized", e.comment.isMinimized())
                    }
                    t.appendChild(r)
                }
            },
            c = function(e) {
                for (var t, o = e = e.cloneNode(!0); o;)
                    if (o.firstChild)
                        o = o.firstChild;
                    else {
                        for (; o && !o.nextSibling;)
                            t = o,
                            o = o.parentNode,
                            3 == t.nodeType && "" == t.data.trim() && o.firstChild != t && r(t);
                        o && (t = o, o = o.nextSibling, 3 == t.nodeType && "" == t.data.trim() && r(t))
                    }
                return e
            };
        var l = e => {
            const t = a(e, !1),
                o = e.getRelativeToSurfaceXY();
            return t.setAttribute("x", Math.round(e.workspace.RTL ? -o.x : o.x)), t.setAttribute("y", Math.round(o.y)), t
        };
        const d = {
            "userscript.js": async function({addon: e, console: t, msg: o}) {
                const n = await e.tab.traps.getBlockly(),
                    r = e.tab.traps.vm;
                let s = {},
                    a = {};
                const i = {
                        isNoop: !0
                    },
                    c = () => {
                        if (s = {}, a = {}, e.settings.get("motion") && (s.motion_turnright = [i, {
                            opcode: "motion_turnleft"
                        }], s.motion_turnleft = [{
                            opcode: "motion_turnright"
                        }, i], s.motion_setx = [i, {
                            opcode: "motion_changexby",
                            remap: {
                                X: "DX"
                            }
                        }, {
                            opcode: "motion_sety",
                            remap: {
                                X: "Y"
                            }
                        }, {
                            opcode: "motion_changeyby",
                            remap: {
                                X: "DY"
                            }
                        }], s.motion_changexby = [{
                            opcode: "motion_setx",
                            remap: {
                                DX: "X"
                            }
                        }, i, {
                            opcode: "motion_sety",
                            remap: {
                                DX: "Y"
                            }
                        }, {
                            opcode: "motion_changeyby",
                            remap: {
                                DX: "DY"
                            }
                        }], s.motion_sety = [{
                            opcode: "motion_setx",
                            remap: {
                                Y: "X"
                            }
                        }, {
                            opcode: "motion_changexby",
                            remap: {
                                Y: "DX"
                            }
                        }, i, {
                            opcode: "motion_changeyby",
                            remap: {
                                Y: "DY"
                            }
                        }], s.motion_changeyby = [{
                            opcode: "motion_setx",
                            remap: {
                                DY: "X"
                            }
                        }, {
                            opcode: "motion_changexby",
                            remap: {
                                DY: "DX"
                            }
                        }, {
                            opcode: "motion_sety",
                            remap: {
                                DY: "Y"
                            }
                        }, i], s.motion_xposition = [i, {
                            opcode: "motion_yposition"
                        }], s.motion_yposition = [{
                            opcode: "motion_xposition"
                        }, i]), e.settings.get("looks") && (s.looks_seteffectto = [i, {
                            opcode: "looks_changeeffectby",
                            remap: {
                                VALUE: "CHANGE"
                            }
                        }], s.looks_changeeffectby = [{
                            opcode: "looks_seteffectto",
                            remap: {
                                CHANGE: "VALUE"
                            }
                        }, i], s.looks_setsizeto = [i, {
                            opcode: "looks_changesizeby",
                            remap: {
                                SIZE: "CHANGE"
                            }
                        }], s.looks_changesizeby = [{
                            opcode: "looks_setsizeto",
                            remap: {
                                CHANGE: "SIZE"
                            }
                        }, i], s.looks_costumenumbername = [i, {
                            opcode: "looks_backdropnumbername"
                        }], s.looks_backdropnumbername = [{
                            opcode: "looks_costumenumbername"
                        }, i], s.looks_show = [i, {
                            opcode: "looks_hide"
                        }], s.looks_hide = [{
                            opcode: "looks_show"
                        }, i], s.looks_nextcostume = [i, {
                            opcode: "looks_nextbackdrop"
                        }], s.looks_nextbackdrop = [{
                            opcode: "looks_nextcostume"
                        }, i], s.looks_think = [i, {
                            opcode: "looks_say"
                        }], s.looks_say = [{
                            opcode: "looks_think"
                        }, i], s.looks_thinkforsecs = [i, {
                            opcode: "looks_sayforsecs"
                        }], s.looks_sayforsecs = [{
                            opcode: "looks_thinkforsecs"
                        }, i], s.looks_switchbackdropto = [i, {
                            opcode: "looks_switchbackdroptoandwait"
                        }], s.looks_switchbackdroptoandwait = [{
                            opcode: "looks_switchbackdropto"
                        }, i]), e.settings.get("sound") && (s.sound_play = [i, {
                            opcode: "sound_playuntildone"
                        }], s.sound_playuntildone = [{
                            opcode: "sound_play"
                        }, i], s.sound_seteffectto = [i, {
                            opcode: "sound_changeeffectby"
                        }], s.sound_changeeffectby = [{
                            opcode: "sound_seteffectto"
                        }, i], s.sound_setvolumeto = [i, {
                            opcode: "sound_changevolumeby"
                        }], s.sound_changevolumeby = [{
                            opcode: "sound_setvolumeto"
                        }, i]), e.settings.get("event") && (s.event_broadcast = [i, {
                            opcode: "event_broadcastandwait"
                        }], s.event_broadcastandwait = [{
                            opcode: "event_broadcast"
                        }, i]), e.settings.get("control") && (s.control_if = [i, {
                            opcode: "control_if_else"
                        }], s.control_if_else = [{
                            opcode: "control_if",
                            remap: {
                                SUBSTACK2: "split"
                            }
                        }, i], s.control_repeat_until = [i, {
                            opcode: "control_wait_until",
                            remap: {
                                SUBSTACK: "split"
                            }
                        }, {
                            opcode: "control_forever",
                            remap: {
                                CONDITION: "split"
                            }
                        }], s.control_forever = [{
                            opcode: "control_repeat_until"
                        }, i], s.control_wait_until = [{
                            opcode: "control_repeat_until"
                        }, i]), e.settings.get("operator") && (s.operator_equals = [{
                            opcode: "operator_gt"
                        }, i, {
                            opcode: "operator_lt"
                        }], s.operator_gt = [i, {
                            opcode: "operator_equals"
                        }, {
                            opcode: "operator_lt"
                        }], s.operator_lt = [{
                            opcode: "operator_gt"
                        }, {
                            opcode: "operator_equals"
                        }, i], s.operator_add = [i, {
                            opcode: "operator_subtract"
                        }, {
                            opcode: "operator_multiply"
                        }, {
                            opcode: "operator_divide"
                        }, {
                            opcode: "operator_mod"
                        }], s.operator_subtract = [{
                            opcode: "operator_add"
                        }, i, {
                            opcode: "operator_multiply"
                        }, {
                            opcode: "operator_divide"
                        }, {
                            opcode: "operator_mod"
                        }], s.operator_multiply = [{
                            opcode: "operator_add"
                        }, {
                            opcode: "operator_subtract"
                        }, i, {
                            opcode: "operator_divide"
                        }, {
                            opcode: "operator_mod"
                        }], s.operator_divide = [{
                            opcode: "operator_add"
                        }, {
                            opcode: "operator_subtract"
                        }, {
                            opcode: "operator_multiply"
                        }, i, {
                            opcode: "operator_mod"
                        }], s.operator_mod = [{
                            opcode: "operator_add"
                        }, {
                            opcode: "operator_subtract"
                        }, {
                            opcode: "operator_multiply"
                        }, {
                            opcode: "operator_divide"
                        }, i], s.operator_and = [i, {
                            opcode: "operator_or"
                        }], s.operator_or = [{
                            opcode: "operator_and"
                        }, i]), e.settings.get("sensing") && (s.sensing_mousex = [i, {
                            opcode: "sensing_mousey"
                        }], s.sensing_mousey = [{
                            opcode: "sensing_mousex"
                        }, i]), e.settings.get("data") && (s.data_setvariableto = [i, {
                            opcode: "data_changevariableby",
                            remapValueType: {
                                VALUE: "math_number"
                            }
                        }], s.data_changevariableby = [{
                            opcode: "data_setvariableto",
                            remapValueType: {
                                VALUE: "text"
                            }
                        }, i], s.data_showvariable = [i, {
                            opcode: "data_hidevariable"
                        }], s.data_hidevariable = [{
                            opcode: "data_showvariable"
                        }, i], s.data_showlist = [i, {
                            opcode: "data_hidelist"
                        }], s.data_hidelist = [{
                            opcode: "data_showlist"
                        }, i], s.data_replaceitemoflist = [i, {
                            opcode: "data_insertatlist"
                        }], s.data_insertatlist = [{
                            opcode: "data_replaceitemoflist"
                        }, i]), e.settings.get("extension") && (s.pen_penDown = [i, {
                            opcode: "pen_penUp"
                        }], s.pen_penUp = [{
                            opcode: "pen_penDown"
                        }, i], s.pen_setPenColorParamTo = [i, {
                            opcode: "pen_changePenColorParamBy"
                        }], s.pen_changePenColorParamBy = [{
                            opcode: "pen_setPenColorParamTo"
                        }, i], s.pen_setPenHueToNumber = [i, {
                            opcode: "pen_changePenHueBy"
                        }], s.pen_changePenHueBy = [{
                            opcode: "pen_setPenHueToNumber"
                        }, i], s.pen_setPenShadeToNumber = [i, {
                            opcode: "pen_changePenShadeBy"
                        }], s.pen_changePenShadeBy = [{
                            opcode: "pen_setPenShadeToNumber"
                        }, i], s.pen_setPenSizeTo = [i, {
                            opcode: "pen_changePenSizeBy"
                        }], s.pen_changePenSizeBy = [{
                            opcode: "pen_setPenSizeTo"
                        }, i], s.music_setTempo = [i, {
                            opcode: "music_changeTempo"
                        }], s.music_changeTempo = [{
                            opcode: "music_setTempo"
                        }, i]), e.settings.get("sa")) {
                            const e = "​​log​​ %s",
                                t = "​​warn​​ %s",
                                n = "​​error​​ %s",
                                r = o("debugger_log"),
                                s = o("debugger_warn"),
                                i = o("debugger_error"),
                                c = {
                                    mutate: {
                                        proccode: e
                                    },
                                    msg: r
                                },
                                l = {
                                    mutate: {
                                        proccode: t
                                    },
                                    msg: s
                                },
                                d = {
                                    mutate: {
                                        proccode: n
                                    },
                                    msg: i
                                };
                            a[e] = [{
                                msg: r,
                                isNoop: !0
                            }, l, d],
                            a[t] = [c, {
                                msg: s,
                                isNoop: !0
                            }, d],
                            a[n] = [c, l, {
                                msg: i,
                                isNoop: !0
                            }]
                        }
                        s.data_variable = [],
                        s.data_listcontents = []
                    };
                c(),
                e.settings.addEventListener("change", c);
                const d = (e, t) => () => {
                    if (t.isNoop)
                        return;
                    if (t.fieldValue)
                        return void e.setFieldValue(t.fieldValue, "VALUE");
                    const o = e.workspace,
                        r = l(e);
                    t.opcode && r.setAttribute("type", t.opcode);
                    const s = e.id,
                        a = e.getParent();
                    let i,
                        c;
                    if (a) {
                        i = a.getConnections_().find(t => t.targetConnection && t.targetConnection.sourceBlock_ === e);
                        const t = e.getConnections_().find(e => e.targetConnection && e.targetConnection.sourceBlock_ === a);
                        c = t.type
                    }
                    const d = [];
                    if (t.remap)
                        for (const e of Array.from(r.children)) {
                            const n = e.getAttribute("name"),
                                s = t.remap[n];
                            if (s)
                                if ("split" === s) {
                                    const t = e.firstChild,
                                        n = t.id,
                                        s = o.getBlockById(n).getRelativeToSurfaceXY();
                                    t.setAttribute("x", Math.round(o.RTL ? -s.x : s.x)),
                                    t.setAttribute("y", Math.round(s.y)),
                                    d.push(t),
                                    r.removeChild(e)
                                } else
                                    e.setAttribute("name", s)
                        }
                    if (t.remapValueType)
                        for (const e of Array.from(r.children)) {
                            const o = e.getAttribute("name"),
                                n = t.remapValueType[o];
                            if (n) {
                                const t = e.firstChild,
                                    o = t.firstChild;
                                t.setAttribute("type", n),
                                o.setAttribute("name", "text" === n ? "TEXT" : "NUM")
                            }
                        }
                    if (t.mutate) {
                        const e = r.querySelector("mutation");
                        for (const [o, n] of Object.entries(t.mutate))
                            e.setAttribute(o, n)
                    }
                    try {
                        n.Events.setGroup(!0),
                        e.dispose(),
                        o.paste(r);
                        for (const e of d)
                            o.paste(e);
                        const t = o.getBlockById(s);
                        if (i) {
                            const e = t.getConnections_();
                            e.find(e => e.type === c).connect(i)
                        }
                    } finally {
                        n.Events.setGroup(!1)
                    }
                };
                e.tab.createBlockContextMenu((t, r) => {
                    if (!e.self.disabled) {
                        const c = r.type;
                        let l = s[r.type] || [];
                        const p = e.settings.get("customargs") ? e.settings.get("customargsmode") : "off";
                        if ("off" !== p && ["argument_reporter_boolean", "argument_reporter_string_number"].includes(c) && !r.isShadow()) {
                            const e = u();
                            if ("all" === p)
                                switch (c) {
                                case "argument_reporter_string_number":
                                    l = Object.values(e).map(e => e.stringArgs).flat(1);
                                    break;
                                case "argument_reporter_boolean":
                                    l = Object.values(e).map(e => e.boolArgs).flat(1)
                                }
                            else if ("defOnly" === p) {
                                const o = r.getRootBlock();
                                if ("procedures_definition" !== o.type)
                                    return t;
                                const n = e[o.getChildren(!0)[0].getProcCode()];
                                switch (c) {
                                case "argument_reporter_string_number":
                                    l = n.stringArgs;
                                    break;
                                case "argument_reporter_boolean":
                                    l = n.boolArgs
                                }
                            }
                            const o = r.getFieldValue("VALUE");
                            l = (i = l, [...new Set(i)]).map(e => ({
                                isNoop: e === o,
                                fieldValue: e,
                                msg: e
                            }))
                        }
                        if ("procedures_call" === r.type) {
                            const e = r.getProcCode();
                            a[e] && (l = a[e])
                        }
                        if (e.settings.get("noop") || (l = l.filter(e => !e.isNoop)), l.forEach((e, n) => {
                            const s = t.findIndex(e => e._isDevtoolsFirstItem),
                                a = -1 !== s ? s : t.length,
                                i = e.msg ? e.msg : e.opcode ? o(e.opcode) : o(r.type);
                            t.splice(a, 0, {
                                enabled: !0,
                                text: i,
                                callback: d(r, e),
                                separator: 0 === n
                            })
                        }), "data_variable" === r.type || "data_listcontents" === r.type) {
                            const e = t.findIndex(e => e.text === n.Msg.DELETE_BLOCK),
                                o = t[e + 1];
                            o && (o.separator = !0)
                        }
                    }
                    var i;
                    return t
                }, {
                    blocks: !0
                });
                const u = () => {
                    const e = {},
                        t = r.editingTarget;
                    return Object.values(t.blocks._blocks).filter(e => "procedures_prototype" === e.opcode).forEach(t => {
                        const o = t.mutation.proccode,
                            n = JSON.parse(t.mutation.argumentnames),
                            r = o.split(/(?=[^\\]%[nbs])/g).map(e => e.trim()).filter(e => "%" === e.charAt(0)).map(e => e.substring(0, 2));
                        const s = [],
                            a = [];
                        for (let e = 0; e < n.length; e++)
                            "%b" === r[e] ? a.push(n[e]) : s.push(n[e]);
                        e[o] = {
                            stringArgs: s,
                            boolArgs: a
                        }
                    }), e
                }
            }
        }
    },
    1622: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return r
        }));
        var n = o(1530);
        const r = {
            "userscript.js": async function({addon: e, msg: t, console: o}) {
                const n = await e.tab.traps.getBlockly();
                let r = {
                    x: 0,
                    y: 0
                };
                const s = new class {
                        constructor()
                        {
                            this.floatBar = null,
                            this.floatInput = null,
                            this.dropdownOut = null,
                            this.dropdown = null,
                            this.prevVal = "",
                            this.DROPDOWN_BLOCK_LIST_MAX_ROWS = 25,
                            this.createDom()
                        }
                        get workspace()
                        {
                            return n.getMainWorkspace()
                        }
                        get selectedTab()
                        {
                            return e.tab.redux.state.scratchGui.editorTab.activeTabIndex
                        }
                        createDom()
                        {
                            this.floatBar = document.body.appendChild(document.createElement("div")),
                            this.floatBar.className = "sa-float-bar",
                            this.floatBar.dir = e.tab.direction,
                            this.floatBar.style.display = "none",
                            this.dropdownOut = this.floatBar.appendChild(document.createElement("div")),
                            this.dropdownOut.className = "sa-float-bar-dropdown-out",
                            this.floatInput = this.dropdownOut.appendChild(document.createElement("input")),
                            this.floatInput.placeholder = t("start-typing"),
                            this.floatInput.className = "sa-float-bar-input",
                            this.floatInput.className = e.tab.scratchClass("input_input-form", {
                                others: "sa-float-bar-input"
                            }),
                            this.dropdown = this.dropdownOut.appendChild(document.createElement("ul")),
                            this.dropdown.className = "sa-float-bar-dropdown",
                            this.floatInput.addEventListener("keyup", () => this.inputChange()),
                            this.floatInput.addEventListener("focus", () => this.inputChange()),
                            this.floatInput.addEventListener("keydown", (...e) => this.inputKeyDown(...e)),
                            this.floatInput.addEventListener("focusout", () => this.hide()),
                            this.dropdownOut.addEventListener("mousedown", (...e) => this.onClick(...e)),
                            document.addEventListener("keydown", e => {
                                let t = e.ctrlKey || e.metaKey;
                                if (" " === e.key && t)
                                    return this.show(e), e.cancelBubble = !0, e.preventDefault(), !0
                            })
                        }
                        show(e)
                        {
                            var t,
                                o;
                            0 === this.selectedTab && (e.cancelBubble = !0, e.preventDefault(), this.buildFilterList(), this.floatBar.style.left = (null !== (t = e.clientX) && void 0 !== t ? t : r.x) + 16 + "px", this.floatBar.style.top = (null !== (o = e.clientY) && void 0 !== o ? o : r.y) - 8 + "px", this.floatBar.style.display = "", this.floatInput.value = "", this.floatInput.focus())
                        }
                        onClick(e)
                        {
                            e.cancelBubble = !0,
                            e.target.closest("input") || e.preventDefault();
                            let t = e && e.target;
                            "B" === t.tagName && (t = t.parentNode),
                            e instanceof MouseEvent && "LI" !== t.tagName || (t && t.data || (t = this.dropdown.querySelector(".sel")), t && (this.createDraggingBlock(t, e), e.shiftKey && (this.floatBar.style.display = "", this.floatInput.focus())))
                        }
                        createDraggingBlock(e, t)
                        {
                            let o = e.data.option;
                            if (o.option) {
                                let e = o.dom.querySelector("field[name=" + o.pickField + "]");
                                e.getAttribute("id") ? (e.innerText = o.option[0], e.setAttribute("id", o.option[1] + "-" + o.option[0])) : e.innerText = o.option[1],
                                "other scripts in sprite" === o.option[1] && o.dom.querySelector("mutation").setAttribute("hasnext", "true")
                            }
                            this.workspace.setResizesEnabled(!1),
                            n.Events.disable();
                            try {
                                var s = n.Xml.domToBlock(o.dom, this.workspace);
                                if (n.scratchBlocksUtils.changeObscuredShadowIds(s), !s.getSvgRoot())
                                    throw new Error("newBlock is not rendered.");
                                let e = s.svgPath_.getBoundingClientRect(),
                                    t = Math.floor((r.x - (e.left + e.right) / 2) / this.workspace.scale),
                                    a = Math.floor((r.y - (e.top + e.bottom) / 2) / this.workspace.scale);
                                s.moveBy(t, a)
                            } finally {
                                n.Events.enable()
                            }
                            n.Events.isEnabled() && n.Events.fire(new n.Events.BlockCreate(s));
                            var a = {
                                clientX: r.x,
                                clientY: r.y,
                                type: "mousedown",
                                preventDefault: function() {
                                    t.preventDefault()
                                },
                                stopPropagation: function() {
                                    t.stopPropagation()
                                },
                                target: e
                            };
                            this.workspace.startDragWithFakeEvent(a, s)
                        }
                        inputChange()
                        {
                            let e = (this.floatInput.value || "").toLowerCase();
                            if (e === this.prevVal)
                                return;
                            this.prevVal = e;
                            let t = this.dropdown.parentNode;
                            this.dropdown.remove();
                            let o = 0,
                                n = e.split(" "),
                                r = this.dropdown.getElementsByTagName("li");
                            for (const e of r) {
                                const t = e.data.text,
                                    r = e.data.lower;
                                let s = 0,
                                    a = [];
                                for (let e = 0; e < n.length; e++) {
                                    let t = " " + n[e],
                                        o = r.indexOf(t, s);
                                    if (-1 === o) {
                                        a = null;
                                        break
                                    }
                                    a.push(o),
                                    s = o + t.length
                                }
                                if (o < this.DROPDOWN_BLOCK_LIST_MAX_ROWS && a) {
                                    for (e.style.display = "block"; e.firstChild;)
                                        e.removeChild(e.firstChild);
                                    let r = 0;
                                    for (let o = 0; o < a.length; o++) {
                                        let s = a[o];
                                        s > r && (e.appendChild(document.createTextNode(t.substring(r, s))), r = s);
                                        let i = document.createElement("b"),
                                            c = n[o].length;
                                        i.appendChild(document.createTextNode(t.substr(r, c))),
                                        e.appendChild(i),
                                        r += c
                                    }
                                    r < t.length && e.appendChild(document.createTextNode(t.substr(r))),
                                    0 === o ? e.classList.add("sel") : e.classList.remove("sel"),
                                    o++
                                } else
                                    e.style.display = "none",
                                    e.classList.remove("sel")
                            }
                            t.append(this.dropdown)
                        }
                        inputKeyDown(e)
                        {
                            if (38 === e.keyCode)
                                return this.navigateFloatFilter(-1), void e.preventDefault();
                            if (40 === e.keyCode)
                                return this.navigateFloatFilter(1), void e.preventDefault();
                            if (13 === e.keyCode) {
                                return this.dropdown.querySelector(".sel") && (this.onClick(e), this.hide()), e.cancelBubble = !0, void e.preventDefault()
                            }
                            return 27 === e.keyCode ? (this.floatInput.value.length > 0 ? (this.floatInput.value = "", this.inputChange(e)) : this.hide(), void e.preventDefault()) : void 0
                        }
                        buildFilterList()
                        {
                            let t = [],
                                o = this.workspace.getToolbox();
                            if (!o)
                                return;
                            let r = o.flyout_.getWorkspace().getTopBlocks(),
                                s = n.Xml.workspaceToDom(o.flyout_.getWorkspace());
                            const a = {};
                            for (const e of s.children)
                                if ("BLOCK" === e.tagName) {
                                    a[e.getAttribute("id")] = e
                                }
                            for (const e of r)
                                this.getBlockText(e, t, a);
                            t.sort((e, t) => e.desc.length < t.desc.length ? -1 : e.desc.length > t.desc.length ? 1 : e.desc.localeCompare(t.desc));
                            let i = 0;
                            for (; this.dropdown.firstChild;)
                                this.dropdown.removeChild(this.dropdown.firstChild);
                            for (const o of t) {
                                const t = document.createElement("li"),
                                    n = o.desc;
                                let r = this.getEdgeTypeClass(o.block);
                                i++,
                                t.innerText = n,
                                t.data = {
                                    text: n,
                                    lower: " " + n.toLowerCase(),
                                    option: o
                                };
                                let s = "sensing_of" === o.block.type ? "sensing" : o.block.getCategory();
                                o.block.isScratchExtension ? s = "pen" : e.tab.getCustomBlock(o.block.procCode_) && (s = "addon-custom-block"),
                                t.className = "sa-block-color sa-block-color-" + s + " sa-" + r,
                                i > this.DROPDOWN_BLOCK_LIST_MAX_ROWS && (t.style.display = "none"),
                                this.dropdown.appendChild(t)
                            }
                            this.dropdownOut.classList.add("vis")
                        }
                        navigateFloatFilter(e)
                        {
                            let t,
                                o = this.dropdown.getElementsByClassName("sel");
                            for (o.length > 0 && "none" !== o[0].style.display ? t = -1 === e ? o[0].previousSibling : o[o.length - 1].nextSibling : (t = this.dropdown.children[0], e = 1); t && "none" === t.style.display;)
                                t = -1 === e ? t.previousSibling : t.nextSibling;
                            if (t) {
                                for (const e of o)
                                    e.classList.remove("sel");
                                t.classList.add("sel")
                            }
                        }
                        getBlockText(e, t, o)
                        {
                            let n,
                                r,
                                s,
                                a = o[e.id];
                            const i = e => {
                                for (const t of e.inputList) {
                                    let e = t.fieldRow;
                                    for (const t of e) {
                                        let e;
                                        r || "blocklyText blocklyDropdownText" !== t.className_ ? e = t.getText() : (r = t.getOptions(), s = t.name, e = r && r.length > 0 ? "^^" : t.getText()),
                                        n = (n ? n + " " : "") + e
                                    }
                                    if (t.connection) {
                                        let e = t.connection.targetBlock();
                                        e && i(e)
                                    }
                                }
                            };
                            if (i(e), r)
                                for (const o of r) {
                                    let r = o[1];
                                    "string" == typeof r && "DELETE_VARIABLE_ID" !== r && "RENAME_VARIABLE_ID" !== r && "NEW_BROADCAST_MESSAGE_ID" !== r && "NEW_BROADCAST_MESSAGE_ID" !== r && "createGlobalVariable" !== r && "createLocalVariable" !== r && "createGlobalList" !== r && "createLocalList" !== r && "createBroadcast" !== r && "RENAME_BROADCAST_MESSAGE_ID" !== r && t.push({
                                        desc: n.replace("^^", o[0]),
                                        block: e,
                                        dom: a,
                                        option: o,
                                        pickField: s
                                    })
                                }
                            else
                                t.push({
                                    desc: n,
                                    block: e,
                                    dom: a
                                });
                            return n
                        }
                        getEdgeTypeClass(e)
                        {
                            switch (e.edgeShape_) {
                            case 1:
                                return "boolean";
                            case 2:
                                return "reporter";
                            default:
                                return e.startHat_ ? "hat" : "block"
                            }
                        }
                        hide()
                        {
                            this.floatBar.style.display = "none"
                        }
                    }
                    ,
                    a = n.Gesture.prototype.doWorkspaceClick_;
                n.Gesture.prototype.doWorkspaceClick_ = function() {
                    e.self.disabled || 1 !== this.mostRecentEvent_.button && !this.mostRecentEvent_.shiftKey || s.show(this.mostRecentEvent_),
                    a.call(this)
                },
                document.addEventListener("mousemove", e => {
                    r = {
                        x: e.clientX,
                        y: e.clientY
                    }
                })
            },
            "userstyle.css": o.n(n).a
        }
    },
    1623: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return r
        }));
        var n = o(1531);
        const r = {
            "userscript.js": async function({addon: e, console: t, msg: o}) {
                const n = await e.tab.traps.getBlockly(),
                    r = e.tab.traps.vm,
                    s = ["RENAME_VARIABLE_ID", "DELETE_VARIABLE_ID", "NEW_BROADCAST_MESSAGE_ID", "RENAME_BROADCAST_MESSAGE_ID"],
                    a = ["createGlobalVariable", "createLocalVariable", "createGlobalList", "createLocalList", "createBroadcast"];
                let i = null,
                    c = null,
                    l = null,
                    d = [],
                    u = [],
                    p = [],
                    h = [];
                const f = n.DropDownDiv.show;
                n.DropDownDiv.show = function(...t) {
                    if (c = document.querySelector(".blocklyDropdownMenu"), !c)
                        return f.call(this, ...t);
                    c.focus = () => {},
                    l = document.createElement("input"),
                    e.tab.displayNoneWhileDisabled(l, {
                        display: "flex"
                    }),
                    l.type = "text",
                    l.addEventListener("input", v),
                    l.addEventListener("keydown", k),
                    l.classList.add("u-dropdown-searchbar"),
                    c.insertBefore(l, c.firstChild),
                    d = Array.from(c.children).filter(e => "INPUT" !== e.tagName).map(e => ({
                        element: e,
                        text: e.textContent
                    })),
                    p = h,
                    v();
                    const o = f.call(this, ...t);
                    return i = n.DropDownDiv.getContentDiv(), i.style.width = getComputedStyle(i).width, i.style.height = getComputedStyle(i).height, c.insertBefore(l, c.firstChild), l.focus(), o
                };
                const m = n.DropDownDiv.clearContent;
                n.DropDownDiv.clearContent = function() {
                    m.call(this),
                    d = [],
                    u = [],
                    n.DropDownDiv.content_.style.height = ""
                };
                const g = n.FieldDropdown.prototype.getOptions;
                n.FieldDropdown.prototype.getOptions = function() {
                    const e = g.call(this),
                        t = this.sourceBlock_,
                        o = r.editingTarget && r.editingTarget.isStage;
                    return t && ("data" === t.category_ ? (e.push(w("createGlobalVariable")), o || e.push(w("createLocalVariable"))) : "data-lists" === t.category_ ? (e.push(w("createGlobalList")), o || e.push(w("createLocalList"))) : "event_broadcast_menu" !== t.type && "event_whenbroadcastreceived" !== t.type || e.push(w("createBroadcast"))), h = e, e
                };
                const b = n.FieldVariable.prototype.onItemSelected;
                function y(e, t) {
                    e.dispatchEvent(new MouseEvent("mousedown", {
                        relatedTarget: e,
                        bubbles: !0
                    })),
                    t && e.dispatchEvent(new MouseEvent("mouseup", {
                        relatedTarget: e,
                        bubbles: !0
                    }));
                    const o = e.offsetTop,
                        n = o + e.offsetHeight,
                        r = i.scrollTop,
                        s = i.offsetHeight,
                        a = r + s;
                    r > o ? i.scrollTop = o : n > a && (i.scrollTop = n - s)
                }
                function v() {
                    const e = u;
                    u = function() {
                        const e = l.value.toLowerCase().trim(),
                            t = (t, o) => {
                                const n = p[o];
                                if (s.includes(n[1]))
                                    return e ? -1 : 0;
                                if (a.includes(n[1]))
                                    return t.element.lastChild.lastChild.textContent = w(n[1])[0], e ? 0 : -1;
                                const r = t.text.toLowerCase();
                                return e === r ? 2 : r.startsWith(e) ? 1 : r.includes(e) ? 0 : -1
                            };
                        return d.map((e, o) => ({
                            item: e,
                            score: t(e, o)
                        })).sort(({score: e}, {score: t}) => Math.max(0, t) - Math.max(0, e))
                    }();
                    let t = e.length !== u.length;
                    if (!t)
                        for (let o = 0; o < u.length; o++)
                            if (u[o].item !== e[o].item) {
                                t = !0;
                                break
                            }
                    if (t && e.length > 0) {
                        for (const {item: t} of e)
                            t.element.remove();
                        for (const {item: e} of u)
                            c.appendChild(e.element)
                    }
                    for (const {item: e, score: t} of u)
                        e.element.hidden = t < 0
                }
                function k(e) {
                    if ("Enter" === e.key) {
                        e.stopPropagation(),
                        e.preventDefault();
                        const t = document.querySelector(".goog-menuitem-highlight");
                        if (t && !t.hidden)
                            return void y(t, !0);
                        const o = n.selected;
                        if ("" === l.value && o && ("event_broadcast" === o.type || "event_broadcastandwait" === o.type || "event_whenbroadcastreceived" === o.type))
                            return void n.DropDownDiv.hide();
                        for (const {item: e} of u)
                            if (!e.element.hidden) {
                                y(e.element, !0);
                                break
                            }
                    } else if ("Escape" === e.key)
                        n.DropDownDiv.hide();
                    else if ("ArrowDown" === e.key || "ArrowUp" === e.key) {
                        e.preventDefault(),
                        e.stopPropagation();
                        const t = u.filter(e => e.score >= 0).map(e => e.item);
                        if (0 === t.length)
                            return;
                        let o = -1;
                        for (let e = 0; e < t.length; e++)
                            if (t[e].element.classList.contains("goog-menuitem-highlight")) {
                                o = e;
                                break
                            }
                        const n = t.length - 1;
                        let r = 0;
                        r = "ArrowDown" === e.key ? -1 === o || o === n ? 0 : o + 1 : -1 === o || 0 === o ? n : o - 1,
                        y(t[r].element, !1)
                    }
                }
                function w(e) {
                    var t;
                    return [o(e, {
                        name: (null === (t = l) || void 0 === t ? void 0 : t.value) || ""
                    }), e]
                }
                n.FieldVariable.prototype.onItemSelected = function(e, t) {
                    const o = this.sourceBlock_;
                    if (o && o.workspace && 0 !== l.value.length) {
                        const e = o.workspace;
                        switch (t.getValue()) {
                        case "createGlobalVariable":
                            {
                                n.Events.setGroup(!0);
                                const t = e.createVariable(l.value);
                                return this.sourceBlock_ && this.setValue(t.getId()), void n.Events.setGroup(!1)
                            }case "createLocalVariable":
                            {
                                n.Events.setGroup(!0);
                                const t = e.createVariable(l.value, "", null, !0);
                                return this.sourceBlock_ && this.setValue(t.getId()), void n.Events.setGroup(!1)
                            }case "createGlobalList":
                            {
                                n.Events.setGroup(!0);
                                const t = e.createVariable(l.value, "list");
                                return this.sourceBlock_ && this.setValue(t.getId()), void n.Events.setGroup(!1)
                            }case "createLocalList":
                            {
                                n.Events.setGroup(!0);
                                const t = e.createVariable(l.value, "list", null, !0);
                                return this.sourceBlock_ && this.setValue(t.getId()), void n.Events.setGroup(!1)
                            }case "createBroadcast":
                            {
                                n.Events.setGroup(!0);
                                const t = e.createVariable(l.value, "broadcast_msg");
                                return this.setValue(t.getId()), void n.Events.setGroup(!1)
                            }
                        }
                    }
                    return b.call(this, e, t)
                }
            },
            "userscript.css": o.n(n).a
        }
    },
    1632: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return n
        }));
        const n = {
            "userscript.js": async ({addon: e, console: t}) => {
                if (!e.tab.redux.state)
                    return t.warn("Redux is not available!");
                e.tab.redux.initialize(),
                e.tab.redux.addEventListener("statechanged", ({detail: o}) => {
                    if (e.self.disabled)
                        return;
                    const n = o;
                    if (!n.action || "scratch-paint/clipboard/SET" !== n.action.type)
                        return;
                    const r = n.next.scratchPaint.clipboard.items;
                    if (1 !== r.length)
                        return;
                    const s = r[0];
                    if (!Array.isArray(s) || "Raster" !== s[0])
                        return t.log("copied element is vector");
                    const a = s[1].source;
                    e.tab.copyImage(a).then(() => t.log("Image successfully copied")).catch(e => t.error("Image could not be copied: ".concat(e)))
                })
            }
        }
    },
    1633: function(e, t, o) {
        "use strict";
        function n(e, t) {
            var o = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var n = Object.getOwnPropertySymbols(e);
                t && (n = n.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))),
                o.push.apply(o, n)
            }
            return o
        }
        function r(e) {
            for (var t = 1; t < arguments.length; t++) {
                var o = null != arguments[t] ? arguments[t] : {};
                t % 2 ? n(Object(o), !0).forEach((function(t) {
                    s(e, t, o[t])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(o)) : n(Object(o)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(o, t))
                }))
            }
            return e
        }
        function s(e, t, o) {
            return t in e ? Object.defineProperty(e, t, {
                value: o,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = o, e
        }
        o.r(t),
        o.d(t, "resources", (function() {
            return i
        }));
        var a = o(1563);
        const i = {
            "userscript.js": async function({addon: e, msg: t, console: o}) {
                const n = Symbol(),
                    s = e => document.body.classList.toggle("sa-stage-color-picker-picking", e);
                let a = !1;
                document.addEventListener("click", e => {
                    a = e.isTrusted
                }, {
                    capture: !0
                }),
                e.tab.redux.initialize(),
                e.tab.redux.addEventListener("statechanged", t => {
                    const o = t.detail.action;
                    o[n] || (!e.self.disabled && a && "scratch-paint/eye-dropper/ACTIVATE_COLOR_PICKER" === o.type && (s(!0), e.tab.redux.dispatch({
                        type: "scratch-gui/color-picker/ACTIVATE_COLOR_PICKER",
                        callback: t => {
                            queueMicrotask(() => {
                                e.tab.redux.dispatch(r(r({}, o), {}, {
                                    [n]: !0
                                })),
                                o.callback(t),
                                o.previousMode && o.previousMode.activate(),
                                e.tab.redux.dispatch({
                                    type: "scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER",
                                    [n]: !0
                                }),
                                s(!1)
                            })
                        }
                    })), "scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER" === o.type && (s(!1), e.tab.redux.state.scratchGui.colorPicker.active && e.tab.redux.dispatch({
                        type: "scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",
                        [n]: !0
                    })))
                })
            },
            "style.css": o.n(a).a
        }
    },
    1646: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return r
        }));
        var n = o(1494);
        const r = {
            "userscript.js": async function({addon: e, console: t}) {
                const o = () => {
                    n.b(!e.self.disabled, e.settings.get("invertDrag"))
                };
                e.self.addEventListener("disabled", o),
                e.self.addEventListener("reenabled", o),
                e.settings.addEventListener("change", o),
                o(),
                n.a(e)
            }
        }
    },
    1651: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return n
        }));
        const n = {
            "userscript.js": async ({addon: e, console: t, msg: o}) => {
                const n = ["sound", "costume"];
                e.tab.createEditorContextMenu(t => {
                    const o = e.tab.traps.vm.editingTarget;
                    "sound" === t.type ? o.reorderSound(t.index, 0) : o.reorderCostume(t.index, 0),
                    queueMicrotask(() => {
                        e.tab.traps.vm.emitTargetsUpdate(),
                        e.tab.traps.vm.runtime.emitProjectChanged(),
                        t.target.click()
                    })
                }, {
                    types: n,
                    position: "assetContextMenuAfterExport",
                    order: 1,
                    label: o("top"),
                    condition: e => 0 !== e.index
                }),
                e.tab.createEditorContextMenu(t => {
                    const o = e.tab.traps.vm.editingTarget;
                    "sound" === t.type ? o.reorderSound(t.index, 1 / 0) : o.reorderCostume(t.index, 1 / 0),
                    queueMicrotask(() => {
                        e.tab.traps.vm.emitTargetsUpdate(),
                        e.tab.traps.vm.runtime.emitProjectChanged(),
                        t.target.click()
                    })
                }, {
                    types: n,
                    position: "assetContextMenuAfterExport",
                    order: 2,
                    label: o("bottom"),
                    condition: e => e.index !== e.target.parentNode.parentNode.childElementCount - 1
                })
            }
        }
    },
    1653: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return r
        }));
        var n = o(1494);
        const r = {
            "userscript.js": async function({addon: e, console: t}) {
                const o = () => {
                    n.c(!e.self.disabled)
                };
                e.self.addEventListener("disabled", o),
                e.self.addEventListener("reenabled", o),
                o(),
                n.a(e)
            }
        }
    },
    1654: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return n
        }));
        const n = {
            "userscript.js": async function({addon: e, msg: t, console: o}) {
                const n = e.tab.traps.vm,
                    r = await e.tab.traps.getBlockly(),
                    s = r.BROADCAST_MESSAGE_VARIABLE_TYPE,
                    a = r.FieldVariable.dropdownCreate;
                r.FieldVariable.dropdownCreate = function() {
                    const o = a.call(this);
                    return !e.self.disabled && this.defaultType_ === s && this.sourceBlock_.workspace.getVariableTypes().includes("broadcast_msg") && o.push([t("RENAME_BROADCAST"), "RENAME_BROADCAST_MESSAGE_ID"]), o
                };
                const i = r.FieldVariable.prototype.onItemSelected;
                r.FieldVariable.prototype.onItemSelected = function(e, t) {
                    const o = this.sourceBlock_.workspace;
                    if (!this.sourceBlock_ || !o || "RENAME_BROADCAST_MESSAGE_ID" !== t.getValue())
                        return i.call(this, e, t);
                    u(o, this.variable_)
                };
                const c = () => {
                        const e = new Set(n.runtime.targets.map(e => e.blocks));
                        for (const t of e)
                            t.resetCache()
                    },
                    l = e => {
                        const t = r.Events.FIRE_QUEUE_[0],
                            o = t.run;
                        t.run = function(t) {
                            o.call(this, t),
                            e(t)
                        }
                    },
                    d = (e, t) => {
                        const o = n.runtime.getTargetForStage().variables[e];
                        o.name = t,
                        o.value = t;
                        const r = new Set(n.runtime.targets.map(e => e.blocks));
                        for (const o of r)
                            for (const n of Object.values(o._blocks)) {
                                const o = n.fields && n.fields.BROADCAST_OPTION;
                                o && o.id === e && (o.value = t)
                            }
                        c()
                    },
                    u = (e, o) => {
                        const a = t("RENAME_BROADCAST_MODAL_TITLE"),
                            i = o.name,
                            u = o.getId(),
                            p = t("RENAME_BROADCAST_TITLE", {
                                name: i
                            }),
                            h = i;
                        r.prompt(p, h, (function(t) {
                            if (!(t = r.Variables.trimName_(t)))
                                return;
                            !!e.getVariable(t, s) ? ((e, t, o, s) => {
                                const a = n.runtime.getTargetForStage().lookupBroadcastByInputValue(s).id;
                                r.Events.setGroup(!0);
                                for (const o of e.getAllBlocks())
                                    for (const e of o.inputList)
                                        for (const o of e.fieldRow)
                                            "BROADCAST_OPTION" === o.name && o.getValue() === t && o.setValue(a);
                                e.deleteVariableById(t),
                                r.Events.setGroup(!1);
                                const i = [],
                                    d = new Set(n.runtime.targets.map(e => e.blocks));
                                for (const e of d)
                                    for (const o of Object.values(e._blocks)) {
                                        const e = o.fields && o.fields.BROADCAST_OPTION;
                                        e && e.id === t && i.push(o)
                                    }
                                const u = e => {
                                    const n = e ? a : t,
                                        r = e ? s : o;
                                    for (const e of i) {
                                        const t = e.fields.BROADCAST_OPTION;
                                        t.id = n,
                                        t.value = r
                                    }
                                    c()
                                };
                                u(!0),
                                l(e => {
                                    u(e)
                                })
                            })(e, u, i, t) : ((e, t, o, n) => {
                                e.renameVariableById(t, n),
                                d(t, n),
                                l(e => {
                                    d(t, e ? n : o)
                                })
                            })(e, u, i, t)
                        }), a, s)
                    };
                (() => {
                    const e = r.getMainWorkspace(),
                        t = e && e.getFlyout();
                    if (e && t) {
                        const o = [...e.getAllBlocks(), ...t.getWorkspace().getAllBlocks()];
                        for (const e of o)
                            for (const t of e.inputList)
                                for (const e of t.fieldRow)
                                    e instanceof r.FieldVariable && (e.menuGenerator_ = r.FieldVariable.dropdownCreate)
                    }
                })()
            }
        }
    },
    1656: function(e, t, o) {
        "use strict";
        o.r(t),
        o.d(t, "resources", (function() {
            return r
        }));
        var n = o(1593);
        const r = {
            "userscript.js": async function({addon: e, console: t}) {
                const o = e.tab.traps.vm,
                    n = () => {
                        d.classList.toggle("sa-comment-preview-delay", "none" !== e.settings.get("delay")),
                        d.classList.toggle("sa-comment-preview-reduce-transparency", e.settings.get("reduce-transparency")),
                        d.classList.toggle("sa-comment-preview-fade", !e.settings.get("reduce-animation"))
                    };
                let r = null,
                    s = null,
                    a = 0,
                    i = 0,
                    c = !1;
                const l = document.createElement("div");
                l.classList.add("sa-comment-preview-outer");
                const d = document.createElement("div");
                d.classList.add("sa-comment-preview-inner"),
                d.classList.add("sa-comment-preview-hidden"),
                n(),
                e.settings.addEventListener("change", n),
                l.appendChild(d),
                document.body.appendChild(l);
                const u = e => o.editingTarget.blocks.getBlock(e) || o.runtime.flyoutBlocks.getBlock(e),
                    p = e => e && e.comment && o.editingTarget.comments[e.comment],
                    h = () => {
                        l.style.transform = "translate(".concat(a + 8, "px, ").concat(i + 8, "px)")
                    },
                    f = () => {
                        r && (r = null, d.classList.add("sa-comment-preview-hidden"))
                    };
                document.addEventListener("mouseover", t => {
                    if (e.self.disabled)
                        return;
                    if (clearTimeout(s), c)
                        return;
                    const n = t.target.closest(".blocklyBubbleCanvas > g, .blocklyBlockCanvas .blocklyDraggable[data-id]");
                    if (n === r)
                        return;
                    if (!n)
                        return void f();
                    let a = null;
                    if (e.settings.get("hover-view") && t.target.closest(".blocklyBubbleCanvas > g") && !t.target.closest("line")) {
                        if ("none" !== n.querySelector("text.scratchCommentText").getAttribute("display")) {
                            const e = n.querySelector("textarea");
                            a = e.value
                        }
                    } else if (t.target.closest(".blocklyBlockCanvas .blocklyDraggable[data-id]")) {
                        const t = n.dataset.id,
                            r = u(t),
                            s = p(r);
                        if (e.settings.get("hover-view-block") && s)
                            a = s.text;
                        else if (r && "procedures_call" === r.opcode && e.settings.get("hover-view-procedure")) {
                            const e = (e => {
                                    const t = Object.values(o.editingTarget.blocks._blocks).find(t => "procedures_prototype" === t.opcode && t.mutation.proccode === e);
                                    if (t) {
                                        if (t.parent)
                                            return u(t.parent);
                                        const e = t.id;
                                        return Object.values(o.editingTarget.blocks._blocks).find(t => "procedures_definition" === t.opcode && t.inputs.custom_block && t.inputs.custom_block.block === e)
                                    }
                                    return null
                                })(r.mutation.proccode),
                                t = p(e);
                            t && (a = t.text)
                        }
                    }
                    null !== a && "" !== a.trim() ? s = (t => {
                        if (!d.classList.contains("sa-comment-preview-hidden"))
                            return void t();
                        const o = e.settings.get("delay");
                        return "long" === o ? setTimeout(t, 500) : "short" === o ? setTimeout(t, 300) : void t()
                    })(() => {
                        r = n,
                        (e => {
                            d.innerText = e,
                            d.classList.remove("sa-comment-preview-hidden"),
                            h()
                        })(a)
                    }) : f()
                }),
                document.addEventListener("mousemove", t => {
                    a = t.clientX,
                    i = t.clientY,
                    c = !1,
                    e.settings.get("follow-mouse") && !d.classList.contains("sa-comment-preview-hidden") && h()
                }),
                document.addEventListener("mousedown", () => {
                    f(),
                    c = !0
                }, {
                    capture: !0
                })
            },
            "userstyle.css": o.n(n).a
        }
    }
}]);
